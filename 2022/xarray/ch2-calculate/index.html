<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222" media="(prefers-color-scheme: light)"><meta name="theme-color" content="#222" media="(prefers-color-scheme: dark)"><meta name="generator" content="Hexo 6.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/bj.apple-touch.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/bj.medium.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/bj.small.png"><link rel="mask-icon" href="/images/bj.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.loli.net/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha256-DfWjNxDkM94fVBWx1H5BMMp0Zq7luBlV8QRcSES7s+0=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><script class="next-config" data-name="main" type="application/json">{"hostname":"buujun.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":true,"version":"8.12.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":true,"style":"flat","show_result":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":false,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="这篇博客主要介绍 Xarray 的进阶操作，包括计算、分组、重采样、滑动和线性回归等应用"><meta property="og:type" content="article"><meta property="og:title" content="Xarray - 计算"><meta property="og:url" content="http://buujun.github.io/2022/xarray/ch2-calculate/index.html"><meta property="og:site_name" content="BUUJUN&#39;s Notes"><meta property="og:description" content="这篇博客主要介绍 Xarray 的进阶操作，包括计算、分组、重采样、滑动和线性回归等应用"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_21_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_25_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_39_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_70_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_72_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_75_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_128_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_129_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_130_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_137_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_138_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_146_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_152_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_154_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_156_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_158_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_164_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_179_1.png"><meta property="og:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_181_1.png"><meta property="article:published_time" content="2022-07-31T21:36:37.000Z"><meta property="article:modified_time" content="2022-07-31T14:22:06.958Z"><meta property="article:author" content="BUUJUN WANG"><meta property="article:tag" content="python"><meta property="article:tag" content="numpy"><meta property="article:tag" content="pandas"><meta property="article:tag" content="matplotlib"><meta property="article:tag" content="xarray"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://buujun.github.io/2022/xarray/ch2-calculate/ch2-calculate_21_1.png"><link rel="canonical" href="http://buujun.github.io/2022/xarray/ch2-calculate/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://buujun.github.io/2022/xarray/ch2-calculate/","path":"2022/xarray/ch2-calculate/","title":"Xarray - 计算"}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>Xarray - 计算 | BUUJUN's Notes</title><link rel="dns-prefetch" href="https://waline-server-buujun.vercel.app"><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript><style>mjx-container[jax=SVG]{direction:ltr}mjx-container[jax=SVG]>svg{overflow:visible}mjx-container[jax=SVG][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=SVG][justify=left]{text-align:left}mjx-container[jax=SVG][justify=right]{text-align:right}g[data-mml-node=merror]>g{fill:red;stroke:red}g[data-mml-node=merror]>rect[data-background]{fill:#ff0;stroke:none}g[data-mml-node=mtable]>line[data-line]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>rect[data-frame]{stroke-width:70px;fill:none}g[data-mml-node=mtable]>.mjx-dashed{stroke-dasharray:140}g[data-mml-node=mtable]>.mjx-dotted{stroke-linecap:round;stroke-dasharray:0,140}g[data-mml-node=mtable]>svg{overflow:visible}[jax=SVG] mjx-tool{display:inline-block;position:relative;width:0;height:0}[jax=SVG] mjx-tool>mjx-tip{position:absolute;top:0;left:0}mjx-tool>mjx-tip{display:inline-block;padding:.2em;border:1px solid #888;font-size:70%;background-color:#f8f8f8;color:#000;box-shadow:2px 2px 5px #aaa}g[data-mml-node=maction][data-toggle]{cursor:pointer}mjx-status{display:block;position:fixed;left:1em;bottom:1em;min-width:25%;padding:.2em .4em;border:1px solid #888;font-size:90%;background-color:#f8f8f8;color:#000}foreignObject[data-mjx-xml]{font-family:initial;line-height:normal;overflow:visible}.MathJax path{stroke-width:3}mjx-container[display=true]{overflow:auto hidden}mjx-container[display=true]+br{display:none}</style></head><body itemscope itemtype="http://schema.org/WebPage"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><p class="site-title">BUUJUN's Notes</p><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">love and share</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">16</span></a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">2</span></a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">32</span></a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-globe fa-fw"></i>友链</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E8%AE%A1%E7%AE%97"><span class="nav-number">1.</span> <span class="nav-text">基础计算</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97"><span class="nav-number">1.1.</span> <span class="nav-text">基本计算</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E5%87%8F%E4%B9%98%E9%99%A4-%E5%92%8C-numpy-%E5%87%BD%E6%95%B0"><span class="nav-number">1.1.1.</span> <span class="nav-text">加减乘除 和 numpy 函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#apply_ufunc-%E5%87%BD%E6%95%B0%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">1.1.2.</span> <span class="nav-text">apply_ufunc 函数的使用</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%99%8D%E7%BB%B4%E8%AE%A1%E7%AE%97-mean-sum-min-max-std-"><span class="nav-number">1.2.</span> <span class="nav-text">降维计算： mean, sum, min, max, std, ...</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE-axis-%E9%99%8D%E7%BB%B4"><span class="nav-number">1.2.1.</span> <span class="nav-text">根据 axis 降维</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE-dim-%E9%99%8D%E7%BB%B4"><span class="nav-number">1.2.2.</span> <span class="nav-text">根据 dim 降维</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A7%E5%88%B6%E7%BC%BA%E5%A4%B1%E5%80%BC-skipna"><span class="nav-number">1.2.3.</span> <span class="nav-text">控制缺失值 skipna</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BB%83%E4%B9%A0"><span class="nav-number">1.2.4.</span> <span class="nav-text">练习</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%BF%E6%92%AD"><span class="nav-number">1.3.</span> <span class="nav-text">广播</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%8B%E6%9D%83%E9%99%8D%E7%BB%B4"><span class="nav-number">1.4.</span> <span class="nav-text">赋权降维</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%BA%90%E6%95%B0%E6%8D%AE%E5%AD%98%E5%9C%A8-%E7%BC%BA%E5%A4%B1%E5%80%BC%E5%92%8C%E6%9F%90%E4%BA%9B%E7%89%B9%E6%AE%8A%E8%AE%A1%E7%AE%97%E7%9A%84%E6%83%85%E5%86%B5"><span class="nav-number">1.4.1.</span> <span class="nav-text">源数据存在 缺失值和某些特殊计算的情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E9%99%85%E6%A1%88%E4%BE%8B%E5%B9%B3%E5%9D%87sst%E7%9A%84%E8%AE%A1%E7%AE%97"><span class="nav-number">1.4.2.</span> <span class="nav-text">实际案例：平均SST的计算</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#groupby-%E5%88%86%E7%BB%84"><span class="nav-number">2.</span> <span class="nav-text">Groupby 分组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%97%B6%E9%97%B4%E5%88%86%E7%BB%84"><span class="nav-number">2.1.</span> <span class="nav-text">根据时间分组</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%97%B6%E9%97%B4%E5%8F%98%E9%87%8F%E7%9A%84-%E5%BE%85%E7%B4%A2%E5%BC%95%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.1.</span> <span class="nav-text">创建时间变量的 待索引对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E6%97%B6%E9%97%B4%E7%B4%A2%E5%BC%95%E5%88%9B%E5%BB%BA-groupby%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.2.</span> <span class="nav-text">根据时间索引，创建 groupby对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E8%AE%BF%E9%97%AE-groupby%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.3.</span> <span class="nav-text">迭代访问 groupby对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%90%E4%B8%AA%E8%AE%BF%E9%97%AE-groupby%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.1.4.</span> <span class="nav-text">逐个访问 groupby对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E5%90%84%E4%B8%AA%E5%88%86%E7%BB%84%E4%B8%AD%E5%AF%B9%E5%BA%94%E5%85%83%E7%B4%A0%E5%9C%A8%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E4%B8%AD%E9%94%AE%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-number">2.1.5.</span> <span class="nav-text">查找各个分组中对应元素在原始数据中键的位置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%AE%B1binning"><span class="nav-number">2.2.</span> <span class="nav-text">分箱（Binning）</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%A0%B9%E6%8D%AE%E5%88%86%E7%AE%B1%E5%88%9B%E5%BB%BA-groupby%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.2.1.</span> <span class="nav-text">根据分箱，创建 groupby对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%AD%E4%BB%A3%E8%AE%BF%E9%97%AE-groupby-%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.2.2.</span> <span class="nav-text">迭代访问 groupby 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%90%E4%B8%AA%E8%AE%BF%E9%97%AE-groupby-%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.2.3.</span> <span class="nav-text">逐个访问 groupby 对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E5%88%86%E7%AE%B1%E5%90%8D%E7%A7%B0%E5%8F%8A%E5%85%B6%E6%95%B0%E6%8D%AE%E5%9C%A8%E5%8E%9F%E5%A7%8B%E6%95%B0%E6%8D%AE%E5%AF%B9%E5%BA%94%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-number">2.2.4.</span> <span class="nav-text">查看分箱名称及其数据在原始数据对应的位置</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#groupby-%E7%9A%84%E5%BA%94%E7%94%A8"><span class="nav-number">2.3.</span> <span class="nav-text">Groupby 的应用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%B4%AF%E8%AE%A1%E9%99%8D%E7%BB%B4"><span class="nav-number">2.3.1.</span> <span class="nav-text">累计（“降维”）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2"><span class="nav-number">2.3.2.</span> <span class="nav-text">转换</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#resample%E9%87%8D%E9%87%87%E6%A0%B7"><span class="nav-number">3.</span> <span class="nav-text">Resample重采样</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#coarsen%E7%B2%97%E5%8C%96"><span class="nav-number">4.</span> <span class="nav-text">Coarsen（粗化）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#rolling-%E6%BB%91%E5%8A%A8%E5%B9%B3%E5%9D%87"><span class="nav-number">5.</span> <span class="nav-text">Rolling 滑动平均</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%BA%E4%BA%86%E6%9B%B4%E5%A5%BD%E7%9A%84%E8%AF%B4%E6%98%8E-rolling-%E7%9A%84%E4%BD%9C%E7%94%A8%E4%B8%8B%E9%9D%A2%E4%B8%BE%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84%E4%BE%8B%E5%AD%90%E8%AF%B4%E6%98%8E%E5%85%B6%E5%8A%9F%E8%83%BD"><span class="nav-number">5.1.</span> <span class="nav-text">为了更好的说明 Rolling 的作用，下面举一个简单的例子说明其功能</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BA%BF%E6%80%A7%E5%A4%9A%E9%A1%B9%E5%BC%8F%E5%9B%9E%E5%BD%92"><span class="nav-number">6.</span> <span class="nav-text">线性多项式回归</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="BUUJUN WANG" src="/images/bj.avatar.gif"><p class="site-author-name" itemprop="name">BUUJUN WANG</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">32</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">2</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://gitee.com/buujun" title="GitHub → https:&#x2F;&#x2F;gitee.com&#x2F;buujun" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:wangbj27@mail2.sysu.edu.cn" title="E-Mail → mailto:wangbj27@mail2.sysu.edu.cn" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="330" height="86" src="//music.163.com/outchain/player?type=0&id=7323360894&auto=0&height=66"></iframe><div class="sidebar-line"></div><div class="links-of-blogroll motion-element links-of-blogroll-block"><div class="links-of-blogroll-title"><i class="fa fa-history fa-" aria-hidden="true"></i> 近期文章</div><ul class="links-of-blogroll-list"><li><a href="/2022/xarray/ch2-calculate/" title="Xarray - 计算" target="_blank">Xarray - 计算</a></li><li><a href="/2022/xarray/ch1-basics/" title="Xarray - 数据创建与读写" target="_blank">Xarray - 数据创建与读写</a></li><li><a href="/2022/data_analysis/09-pandas-time_series/" title="Pandas + Datetime - 时间序列" target="_blank">Pandas + Datetime - 时间序列</a></li><li><a href="/2022/data_analysis/08-pandas_and_seaborn/" title="Matplotlib + Seaborn - 绘图基础" target="_blank">Matplotlib + Seaborn - 绘图基础</a></li><li><a href="/2022/data_analysis/07-matplotlib/" title="Matplotlib - 绘图基础" target="_blank">Matplotlib - 绘图基础</a></li></ul></div></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://buujun.github.io/2022/xarray/ch2-calculate/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/bj.avatar.gif"><meta itemprop="name" content="BUUJUN WANG"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="BUUJUN's Notes"><meta itemprop="description" content=""></span><span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork"><meta itemprop="name" content="Xarray - 计算 | BUUJUN's Notes"><meta itemprop="description" content=""></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Xarray - 计算</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-07-31 21:36:37 / 修改时间：14:22:06" itemprop="dateCreated datePublished" datetime="2022-07-31T21:36:37Z">2022-07-31</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a></span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>这篇博客主要介绍 Xarray 的进阶操作，包括计算、分组、重采样、滑动和线性回归等应用<br><span id="more"></span></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> xarray <span class="keyword">as</span> xr</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line">%matplotlib inline</span><br><span class="line"><span class="comment"># 给一个随机数种子，使得每次运行得到的随机数是相同的</span></span><br><span class="line">rng = np.random.default_rng(seed=<span class="number">0</span>)  </span><br><span class="line"><span class="comment"># 数据导入</span></span><br><span class="line">path = <span class="string">".data/sst.mnmean.nc"</span></span><br><span class="line"><span class="comment"># 丢弃一个不必要导入的变量:time_bnds</span></span><br><span class="line">ds = xr.open_dataset(path, drop_variables=[<span class="string">"time_bnds"</span>])</span><br><span class="line"><span class="comment"># 下述代码需几分钟导入数据</span></span><br><span class="line">ds = ds.sel(time=<span class="built_in">slice</span>(<span class="string">"1960"</span>, <span class="string">"2018"</span>)).load()</span><br></pre></td></tr></table></figure><h2 id="基础计算">基础计算</h2><h3 id="基本计算">基本计算</h3><h4 id="加减乘除-和-numpy-函数">加减乘除 和 <strong><em>numpy</em></strong> 函数</h4><p>xarray 的 DataArray 和 DataSet 对象可以无缝地使用计算操作符（如+, -, *, /）和 numpy 数组函数。</p><p>下面我们将海温数据的 摄氏温度 改写为 开尔文温度 为例说明上述问题。<br>可以发现再进行计算操作后，数据集的维度和坐标都没有发生变化。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sst_kelvin = ds.sst+<span class="number">270</span></span><br></pre></td></tr></table></figure><p>下面我们来尝试一下用更为复杂的函数进行计算。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.log(sst_kelvin ** <span class="number">2</span>).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br><span class="line">  * time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01</span><br></pre></td></tr></table></figure><h4 id="apply_ufunc-函数的使用"><strong><em>apply_ufunc</em></strong> 函数的使用</h4><p>上面可以调用 <strong>np.log(ds)</strong> 并使其在 xarray 中“正常工作”是非常幸运的，但是 并非所有的库都能直接在 xarray 中正常工作 。</p><p><strong><em>xr.apply_ufunc(function, vars)</em></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xr.apply_ufunc(np.log, sst_kelvin**<span class="number">2</span>).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br><span class="line">  * time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01</span><br></pre></td></tr></table></figure><p>apply_ufunc 函数功能强大，有很多可选参数以便进行复杂操作</p><p>更多可查阅：<a target="_blank" rel="noopener" href="http://xarray.pydata.org/en/latest/generated/xarray.apply_ufunc.html" class="uri">http://xarray.pydata.org/en/latest/generated/xarray.apply_ufunc.html</a></p><h3 id="降维计算-mean-sum-min-max-std-">降维计算： <strong><em>mean, sum, min, max, std, ...</em></strong></h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sst = ds.sst</span><br></pre></td></tr></table></figure><h4 id="根据-axis-降维">根据 <strong><em>axis</em></strong> 降维</h4><p><strong><em>xarray.mean( axis )</em></strong></p><p>在numpy中，如果要进行对某一维度以某种方式（譬如取最大、小值，平均值）进行降维，可通过指定axis参数实现。比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(<span class="number">20</span>).reshape(<span class="number">5</span>,<span class="number">4</span>)</span><br><span class="line">arr.<span class="built_in">sum</span>(axis = <span class="number">0</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">array([40, 45, 50, 55])</span><br></pre></td></tr></table></figure><p>对于xarray对象，如sst：如果要对时间方向上以平均的方法进行降维，与numpy中的方法类似，可写为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对第0维度（维度time）以平均的方法进行降维</span></span><br><span class="line">sst.mean(axis = <span class="number">0</span>).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sst.mean(axis = <span class="number">0</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb2306503a0&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_21_1.png" alt="png"></p><p>那么如果要对经纬方向上同时进行降维应当如何写呢？只需要将同时降维的维度号用小括号包含在内即可。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对第1、2维度（维度lat、lon）以平均的方法进行降维</span></span><br><span class="line">sst.mean(axis=(<span class="number">1</span>, <span class="number">2</span>)).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01</span><br></pre></td></tr></table></figure><p>通过对经纬方向的降维，我们现在得到了一个时间序列，这个时间序列描述了全球平均表面海温（SST）的变化。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sst.mean(axis=(<span class="number">1</span>, <span class="number">2</span>)).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb2305126a0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_25_1.png" alt="png"></p><p>可以注意到每一年中全球平均海温存在明显的季节振荡（变化），这个季节振荡的去除可利用 <strong>resample</strong> 方法得到，后续将会详细介绍这个功能的使用方法。</p><h4 id="根据-dim-降维">根据 <strong><em>dim</em></strong> 降维</h4><p><strong><em>xarray.mean( dim )</em></strong></p><p>除了使用类似于numpy中的对数轴的降维方法，也可以使用xarray中独特、便捷的方法。这种方法无需记忆数轴所对应的维度名称。</p><p>若要求解多年SST的平均场，可以通过对时间维取平均降维实现。这可以定义dim这个参数实现。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sst.mean(dim=<span class="string">"time"</span>).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br></pre></td></tr></table></figure><p>当然除了mean方法，其他的numpy标准降维方法也是可以使用的，如min（取最小值）, max（取最大值）, sum（求和）, std（求解标准差）等。</p><h4 id="控制缺失值-skipna">控制缺失值 <strong><em>skipna</em></strong></h4><p>上述这些操作会自动跳过缺失值，这对于某些数据的处理是非常有利的，比如SST仅在海洋上有值，但陆地上没有值，利用.mean进行计算时会自动忽略缺失值。</p><p>为进一步说明，下面举一个例子</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xr.DataArray([<span class="number">1</span>, <span class="number">2</span>, np.nan, <span class="number">3</span>]).mean()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(2.)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-599829ba-4502-416a-b44f-5c46d4c6fe3b" class="xr-array-in" type="checkbox" checked><label for="section-599829ba-4502-416a-b44f-5c46d4c6fe3b" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>2.0</span></div><div class="xr-array-data"><pre>array(2.)</pre></div></div></li><li class="xr-section-item"><input id="section-6ef474d6-57c3-42b2-a725-069ab1c9a9b5" class="xr-section-summary-in" type="checkbox" disabled><label for="section-6ef474d6-57c3-42b2-a725-069ab1c9a9b5" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-508b4585-3542-4922-ab9b-5f9b1c3b6b30" class="xr-section-summary-in" type="checkbox" disabled><label for="section-508b4585-3542-4922-ab9b-5f9b1c3b6b30" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>如果要考虑缺失值的计算（虽然通常没有此类需求），则需在括号中添加参数skipna=False.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xr.DataArray([<span class="number">1</span>, <span class="number">2</span>, np.nan, <span class="number">3</span>]).mean(skipna=<span class="literal">False</span>)</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(nan)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-ab8ca142-d233-4c42-a95f-98ac8d099745" class="xr-array-in" type="checkbox" checked><label for="section-ab8ca142-d233-4c42-a95f-98ac8d099745" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>nan</span></div><div class="xr-array-data"><pre>array(nan)</pre></div></div></li><li class="xr-section-item"><input id="section-72def6d7-c63a-4134-affb-6518bb37c881" class="xr-section-summary-in" type="checkbox" disabled><label for="section-72def6d7-c63a-4134-affb-6518bb37c881" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-37ea4bec-7e0b-458f-95e8-e5d01c513407" class="xr-section-summary-in" type="checkbox" disabled><label for="section-37ea4bec-7e0b-458f-95e8-e5d01c513407" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><h4 id="练习">练习</h4><p>在经度和纬度上均取变量sst的平均值。绘制一个简单的时间序列图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在这里写你的代码</span></span><br><span class="line">sst.mean(dim=(<span class="string">"lat"</span>, <span class="string">"lon"</span>)).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb2304a52b0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_39_1.png" alt="png"></p><h3 id="广播">广播</h3><p>广播（Broadcasting）是指具有不同维度数组的对齐。</p><p>基于数组形状的 Numpy 广播规则有时可能难以理解和记住，<br>Xarray相较Numpy提供了按维度名称（而非数组形状）进行广播的方法，免去了记忆的困难。</p><p>为说明广播在计算中的作用，下面将创建一个与纬度有关的权重因子。这个权重因子常用于描述规则经纬网格上数据的面积权重系数。</p><p>下述的代码创建了一个权重系数，ds.lat可以获取ds的纬度数组（离散角度值）。因为后续的np.cos()只能接受弧度进行计算，这儿利用np.deg2rad函数将角度转换为弧度，再利用np.cos()计算余弦值。</p><p>总而言之，本质上权重系数即为各个纬度上的余弦值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">weights = np.cos(np.deg2rad(ds.lat))</span><br><span class="line">weights.coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">    * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br></pre></td></tr></table></figure><p>此时，权重因子仅有一个维度。如果我们将这个权重因子与SST相乘会发生什么呢？</p><p>应当注意这个相乘不是矩阵相乘，而是对应位置的元素彼此相乘。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(ds.sst * weights).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br><span class="line">  * time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01</span><br></pre></td></tr></table></figure><p>如果要广播的数组共享一个维度名称，但坐标维度不同。<br>在这种情况下，广播将会使用xarray的默认对齐设置（即取两者变量索引的交集）进行对齐（包括使用NaN填充缺失值）。</p><p>如果这不是想要的结果，最好在广播之前显式调用 <strong><em>align</em></strong> 并指定参数使得两个数组得以对齐。</p><h3 id="赋权降维">赋权降维</h3><p><strong><em>DataArray.weighted( weights ) , Dataset.weighted( weights )</em></strong></p><p>xarray目前支持DataArray和Dataset对象，对于这两个对象的赋权降维可采用 DataArray.weighted() 和 Dataset.weighted() 方法。<br>目前支持带权重的以平均（mean）和求和（sum）方法降维。</p><p>为说明赋权降维，下面先创建一个关于降水数据的DataArray和一个权重的DataArray.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">prec = xr.DataArray(</span><br><span class="line">    [<span class="number">50</span>, <span class="number">10</span>, <span class="number">0.9</span>], </span><br><span class="line">    dims=(<span class="string">"month"</span>), </span><br><span class="line">    coords= {<span class="string">"month"</span>:(<span class="string">"month"</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])}</span><br><span class="line">    )</span><br><span class="line">prec.coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * month    (month) int64 1 2 3</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">weights = xr.DataArray(</span><br><span class="line">    [<span class="number">31</span>, <span class="number">28</span>, <span class="number">31</span>], </span><br><span class="line">    dims=(<span class="string">"month"</span>), </span><br><span class="line">    coords= {<span class="string">"month"</span>:(<span class="string">"month"</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])}</span><br><span class="line">    )</span><br><span class="line">weights</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (month: 3)&gt;
array([31, 28, 31])
Coordinates:

* month    (month) int64 1 2 3</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">month</span>: 3</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-b59e1884-76cf-443c-9889-d7c1b9714673" class="xr-array-in" type="checkbox" checked><label for="section-b59e1884-76cf-443c-9889-d7c1b9714673" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>31 28 31</span></div><div class="xr-array-data"><pre>array([31, 28, 31])</pre></div></div></li><li class="xr-section-item"><input id="section-10618937-bbd9-4a87-af7c-f2dc6caaafa5" class="xr-section-summary-in" type="checkbox" checked><label for="section-10618937-bbd9-4a87-af7c-f2dc6caaafa5" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">month</span></div><div class="xr-var-dims">(month)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 2 3</div><input id="attrs-f4ed34d1-2da5-4d9f-ac91-a46629783bb0" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-f4ed34d1-2da5-4d9f-ac91-a46629783bb0" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-063e4505-4679-4828-a46f-cea709135726" class="xr-var-data-in" type="checkbox"><label for="data-063e4505-4679-4828-a46f-cea709135726" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([1, 2, 3])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-f7445860-1aa8-40ce-bf84-ae118a467f5b" class="xr-section-summary-in" type="checkbox" disabled><label for="section-f7445860-1aa8-40ce-bf84-ae118a467f5b" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>接下来对prec以weights为权重创建权重对象</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">weighted_prec = prec.weighted(weights)</span><br><span class="line">weighted_prec</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DataArrayWeighted with weights along dimensions: month</span><br></pre></td></tr></table></figure><p>计算加权和：50x31 + 10x28 + 0.9x31</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weighted_prec.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(1857.9)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-5e59fcda-0f5b-4498-be69-5cfc82b8694b" class="xr-array-in" type="checkbox" checked><label for="section-5e59fcda-0f5b-4498-be69-5cfc82b8694b" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>1.858e+03</span></div><div class="xr-array-data"><pre>array(1857.9)</pre></div></div></li><li class="xr-section-item"><input id="section-55c48d85-5994-463a-8637-4c6b681dff6b" class="xr-section-summary-in" type="checkbox" disabled><label for="section-55c48d85-5994-463a-8637-4c6b681dff6b" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-c96ffb93-628b-4c92-8d78-78083923fbe7" class="xr-section-summary-in" type="checkbox" disabled><label for="section-c96ffb93-628b-4c92-8d78-78083923fbe7" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>等价于：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(prec*weights).<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(1857.9)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-968a77ed-b6ff-4c9a-8fd3-18d0598e32da" class="xr-array-in" type="checkbox" checked><label for="section-968a77ed-b6ff-4c9a-8fd3-18d0598e32da" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>1.858e+03</span></div><div class="xr-array-data"><pre>array(1857.9)</pre></div></div></li><li class="xr-section-item"><input id="section-6b6493f4-88c9-4114-8c0a-40c39bdeec1e" class="xr-section-summary-in" type="checkbox" disabled><label for="section-6b6493f4-88c9-4114-8c0a-40c39bdeec1e" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-8d90aa8e-499c-4a8f-b455-3b1edcf691e8" class="xr-section-summary-in" type="checkbox" disabled><label for="section-8d90aa8e-499c-4a8f-b455-3b1edcf691e8" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>计算加权平均：( 50x31 + 10x28 + 0.9x31 ) / (31+28+31)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">weighted_prec.mean(dim = <span class="string">"month"</span>)</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(20.64333333)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-ba94d86f-2238-4e05-be5a-5ac203543f8e" class="xr-array-in" type="checkbox" checked><label for="section-ba94d86f-2238-4e05-be5a-5ac203543f8e" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>20.64</span></div><div class="xr-array-data"><pre>array(20.64333333)</pre></div></div></li><li class="xr-section-item"><input id="section-06b314b2-a88c-4aee-80d0-2ce6995395af" class="xr-section-summary-in" type="checkbox" disabled><label for="section-06b314b2-a88c-4aee-80d0-2ce6995395af" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-52118782-0068-452f-bd3c-da76eb3a5996" class="xr-section-summary-in" type="checkbox" disabled><label for="section-52118782-0068-452f-bd3c-da76eb3a5996" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>等价于：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(prec*weights).<span class="built_in">sum</span>() / weights.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(20.64333333)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-9adfcfa0-b5be-45c8-ad33-0a27611134ad" class="xr-array-in" type="checkbox" checked><label for="section-9adfcfa0-b5be-45c8-ad33-0a27611134ad" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>20.64</span></div><div class="xr-array-data"><pre>array(20.64333333)</pre></div></div></li><li class="xr-section-item"><input id="section-1efd1a7d-f5ba-4820-b5a9-e217bc5b5ccf" class="xr-section-summary-in" type="checkbox" disabled><label for="section-1efd1a7d-f5ba-4820-b5a9-e217bc5b5ccf" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-ee6a2dfe-5a09-46b0-8a81-b1f06d15f2a8" class="xr-section-summary-in" type="checkbox" disabled><label for="section-ee6a2dfe-5a09-46b0-8a81-b1f06d15f2a8" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><h4 id="源数据存在-缺失值和某些特殊计算的情况">源数据存在 缺失值和某些特殊计算的情况</h4><p>如果原数据存在缺失值np.nan时，赋权降维将得到正确的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data = xr.DataArray([np.nan, <span class="number">2</span>, <span class="number">4</span>])</span><br><span class="line">weights = xr.DataArray([<span class="number">8</span>, <span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">data.weighted(weights).mean()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(3.)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-0f8050a9-496c-46be-b495-cf6ef6c17d05" class="xr-array-in" type="checkbox" checked><label for="section-0f8050a9-496c-46be-b495-cf6ef6c17d05" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>3.0</span></div><div class="xr-array-data"><pre>array(3.)</pre></div></div></li><li class="xr-section-item"><input id="section-abd82ae1-a009-4287-a393-e7a4d6b500b3" class="xr-section-summary-in" type="checkbox" disabled><label for="section-abd82ae1-a009-4287-a393-e7a4d6b500b3" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-2b81feff-d477-4914-92e0-3ec2157f6a7a" class="xr-section-summary-in" type="checkbox" disabled><label for="section-2b81feff-d477-4914-92e0-3ec2157f6a7a" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>而利用 (data * weights).sum() / weights.sum() 公式进行计算，得到的结果是不正确的<br>不正确的原因在于某一点没有值，但其权重却参与了计算，会使得整体值减小。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(data*weights).<span class="built_in">sum</span>()/weights.<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray ()&gt;
array(0.6)</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-aefe8ed3-620e-49b1-969f-aba4b28171d4" class="xr-array-in" type="checkbox" checked><label for="section-aefe8ed3-620e-49b1-969f-aba4b28171d4" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>0.6</span></div><div class="xr-array-data"><pre>array(0.6)</pre></div></div></li><li class="xr-section-item"><input id="section-b26a3ed5-d98f-40ea-b862-c527757b4b8e" class="xr-section-summary-in" type="checkbox" disabled><label for="section-b26a3ed5-d98f-40ea-b862-c527757b4b8e" class="xr-section-summary" title="Expand/collapse section">Coordinates: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"></ul></div></li><li class="xr-section-item"><input id="section-6b37084b-d253-4b99-af35-ae5bda50c067" class="xr-section-summary-in" type="checkbox" disabled><label for="section-6b37084b-d253-4b99-af35-ae5bda50c067" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><h4 id="实际案例平均sst的计算">实际案例：平均SST的计算</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据导入</span></span><br><span class="line">path = <span class="string">".data/sst.mnmean.nc"</span></span><br><span class="line">p = <span class="string">'#ff9988'</span></span><br><span class="line"><span class="comment"># 丢弃一个不必要导入的变量</span></span><br><span class="line">ds = xr.open_dataset(path, drop_variables=[<span class="string">"time_bnds"</span>])</span><br><span class="line">ds = ds.sel(time=<span class="built_in">slice</span>(<span class="string">"1960"</span>, <span class="string">"2018"</span>)).load()</span><br><span class="line">weights = np.cos(np.deg2rad(ds.lat))</span><br></pre></td></tr></table></figure><p>尝试一下以下方法对带权重的空间平均SST进行计算，就如下述代码所示</p><p>没有考虑缺厕值问题，导致结果偏小</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sst_mean = ((ds.sst * weights).<span class="built_in">sum</span>(dim=<span class="string">"lat"</span>) / weights.<span class="built_in">sum</span>(dim=<span class="string">"lat"</span>)).mean(dim=<span class="string">"lon"</span>)</span><br><span class="line">sst_mean.plot()</span><br><span class="line">plt.title(<span class="string">"This is wrong!"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(0.5, 1.0, 'This is wrong!')</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_70_1.png" alt="png"></p><p>就一般而言，多维数组上的赋权降维是复杂的。为了使操作更简单，xarray提供了一种赋权降维的机制。<br>这个机制通过创建一个特殊的中间DataArrayWeighted对象来实现这个目的，从而能够对数组使用各类的降维操作。</p><p>下述代码对DataArray对象给予了.weighted()方法，括号内填入了权重。</p><p>运行的结果创建了一个关于DataArray的权重对象（DataArrayWeighted），并且这个权重是伴随着维度lat（纬度）变化的。</p><p>接着对DataArray这个权重对象同时在在维度lon, lat上取平均。这时我们便获得了一个正确的全球平均SST.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sst_weighted = ds.sst.weighted(weights)</span><br><span class="line">sst_weighted.mean(dim=(<span class="string">"lon"</span>, <span class="string">"lat"</span>)).plot()</span><br><span class="line">plt.title(<span class="string">"Correct Global Mean SST"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Text(0.5, 1.0, 'Correct Global Mean SST')</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_72_1.png" alt="png"></p><h2 id="groupby-分组">Groupby 分组</h2><p>Groupby是Pandas包中比较重要的一种聚合方法<br>xarray借鉴了Pandas包中groupby功能，在xarray的DataArrays和Datasets上实现分割（split）、应用（apply） 和 组合（combine）</p><p>为提供一个实际案例，下面考虑某个格点上的SST时间序列。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb23037de20&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_75_1.png" alt="png"></p><h3 id="根据时间分组">根据时间分组</h3><h4 id="创建时间变量的-待索引对象">创建时间变量的 <strong>待索引对象</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.time.dt</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;xarray.core.accessor_dt.DatetimeAccessor at 0x7fb2302d7700&gt;</span><br></pre></td></tr></table></figure><p>利用.dt.month提取各个时间的月份数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.time.dt.month.shape <span class="comment">#提取月份</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(708,)</span><br></pre></td></tr></table></figure><p>利用.dt.year提取各个时间的年份数据</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.time.dt.year.shape <span class="comment"># 提取年</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(708,)</span><br></pre></td></tr></table></figure><h4 id="根据时间索引创建-groupby对象">根据时间索引，创建 <strong>groupby对象</strong></h4><p><strong><em>ds.groupby( ds.time.dt.month )</em></strong><br><strong><em>ds.groupby( "time.month" )</em></strong></p><p>类似于Pandas包中的groupby的思想，我们利用ds.groupby()函数将月份作为键（唯一值）来对原数据进行分离。<br>本质是即把各年的某个月的数据放到了一组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gb = ds.groupby(ds.time.dt.month) <span class="comment"># 根据月份进行分组</span></span><br><span class="line">gb</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DatasetGroupBy, grouped over 'month'</span><br><span class="line">12 groups with labels 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12.</span><br></pre></td></tr></table></figure><p>如果说时间参数变量已经包含在原数据集中（这也是通常出现的情况），可以使用xarray中更为简洁的方法，即"time.month". 这与ds.time.dt.month实现的操作是一致的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gb = ds.groupby(<span class="string">"time.month"</span>)</span><br><span class="line">gb</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DatasetGroupBy, grouped over 'month'</span><br><span class="line">12 groups with labels 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12.</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.groupby(<span class="string">"time.year"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DatasetGroupBy, grouped over 'year'</span><br><span class="line">59 groups with labels 1960, 1961, 1962, ..., 2017, 2018.</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds.groupby(<span class="string">"time.season"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DatasetGroupBy, grouped over 'season'</span><br><span class="line">4 groups with labels 'DJF', 'JJA', 'MAM', 'SON'.</span><br></pre></td></tr></table></figure><h4 id="迭代访问-groupby对象">迭代访问 <strong>groupby对象</strong></h4><p>经过上面的分组操作后，原数据已经拆分成12个组（groups），放置在变量gb中。<br>对于这12个组，可通过循环进行遍历。迭代器返回各个组的键（组名）和值（与该组相对应的实际数据集）。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> group_name, group_ds <span class="keyword">in</span> gb:</span><br><span class="line">    <span class="comment"># 当第一个循环结束时，停止遍历gb</span></span><br><span class="line">    display(group_ds) </span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 59)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1961-01-01 ... 2018-01-01
Data variables:
    sst      (time, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan
Attributes: (12/37)
    climatology:               Climatology is based on 1971-2000 SST, Xue, Y....
    description:               In situ data: ICOADS2.5 before 2007 and NCEP i...
    keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...
    keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...
    instrument:                Conventional thermometers
    source_comment:            SSTs were observed by conventional thermometer...
    ...                        ...
    creator_url_original:      <https :>
    license:                   No constraints on data access or use
    comment:                   SSTs were observed by conventional thermometer...
    summary:                   ERSST.v5 is developed based on v4 after revisi...
    dataset_title:             NOAA Extended Reconstructed SST V5
    data_modified:             2021-01-01</https></pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-aaef1f07-3539-4082-8351-8dcb2ffe76c3" class="xr-section-summary-in" type="checkbox" disabled><label for="section-aaef1f07-3539-4082-8351-8dcb2ffe76c3" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 59</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-7c24feaa-3b51-4250-924b-7509503b56d4" class="xr-section-summary-in" type="checkbox" checked><label for="section-7c24feaa-3b51-4250-924b-7509503b56d4" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-cc31674a-e913-40a2-9639-e17c5e52da46" class="xr-var-attrs-in" type="checkbox"><label for="attrs-cc31674a-e913-40a2-9639-e17c5e52da46" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-47d23c06-ec86-403f-8070-af01356eca5e" class="xr-var-data-in" type="checkbox"><label for="data-47d23c06-ec86-403f-8070-af01356eca5e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-bfed0044-0b48-418f-87a7-ff390aab75d9" class="xr-var-attrs-in" type="checkbox"><label for="attrs-bfed0044-0b48-418f-87a7-ff390aab75d9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-82d5a0ca-0e12-462f-b5e7-688b17226fba" class="xr-var-data-in" type="checkbox"><label for="data-82d5a0ca-0e12-462f-b5e7-688b17226fba" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-01-01</div><input id="attrs-f60187b5-92ec-480b-9b41-f63c4e33820f" class="xr-var-attrs-in" type="checkbox"><label for="attrs-f60187b5-92ec-480b-9b41-f63c4e33820f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-4939138c-f083-490e-8f62-16a9fe9fa6f0" class="xr-var-data-in" type="checkbox"><label for="data-4939138c-f083-490e-8f62-16a9fe9fa6f0" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1961-01-01T00:00:00.000000000',
       '1962-01-01T00:00:00.000000000', '1963-01-01T00:00:00.000000000',
       '1964-01-01T00:00:00.000000000', '1965-01-01T00:00:00.000000000',
       '1966-01-01T00:00:00.000000000', '1967-01-01T00:00:00.000000000',
       '1968-01-01T00:00:00.000000000', '1969-01-01T00:00:00.000000000',
       '1970-01-01T00:00:00.000000000', '1971-01-01T00:00:00.000000000',
       '1972-01-01T00:00:00.000000000', '1973-01-01T00:00:00.000000000',
       '1974-01-01T00:00:00.000000000', '1975-01-01T00:00:00.000000000',
       '1976-01-01T00:00:00.000000000', '1977-01-01T00:00:00.000000000',
       '1978-01-01T00:00:00.000000000', '1979-01-01T00:00:00.000000000',
       '1980-01-01T00:00:00.000000000', '1981-01-01T00:00:00.000000000',
       '1982-01-01T00:00:00.000000000', '1983-01-01T00:00:00.000000000',
       '1984-01-01T00:00:00.000000000', '1985-01-01T00:00:00.000000000',
       '1986-01-01T00:00:00.000000000', '1987-01-01T00:00:00.000000000',
       '1988-01-01T00:00:00.000000000', '1989-01-01T00:00:00.000000000',
       '1990-01-01T00:00:00.000000000', '1991-01-01T00:00:00.000000000',
       '1992-01-01T00:00:00.000000000', '1993-01-01T00:00:00.000000000',
       '1994-01-01T00:00:00.000000000', '1995-01-01T00:00:00.000000000',
       '1996-01-01T00:00:00.000000000', '1997-01-01T00:00:00.000000000',
       '1998-01-01T00:00:00.000000000', '1999-01-01T00:00:00.000000000',
       '2000-01-01T00:00:00.000000000', '2001-01-01T00:00:00.000000000',
       '2002-01-01T00:00:00.000000000', '2003-01-01T00:00:00.000000000',
       '2004-01-01T00:00:00.000000000', '2005-01-01T00:00:00.000000000',
       '2006-01-01T00:00:00.000000000', '2007-01-01T00:00:00.000000000',
       '2008-01-01T00:00:00.000000000', '2009-01-01T00:00:00.000000000',
       '2010-01-01T00:00:00.000000000', '2011-01-01T00:00:00.000000000',
       '2012-01-01T00:00:00.000000000', '2013-01-01T00:00:00.000000000',
       '2014-01-01T00:00:00.000000000', '2015-01-01T00:00:00.000000000',
       '2016-01-01T00:00:00.000000000', '2017-01-01T00:00:00.000000000',
       '2018-01-01T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-2d61fe49-09ad-49a5-a158-9920aa07d126" class="xr-section-summary-in" type="checkbox" checked><label for="section-2d61fe49-09ad-49a5-a158-9920aa07d126" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 -1.8 ... nan nan nan</div><input id="attrs-44a61fea-bd21-444d-8c70-41e30f0527ed" class="xr-var-attrs-in" type="checkbox"><label for="attrs-44a61fea-bd21-444d-8c70-41e30f0527ed" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-92de90b4-ea94-416d-b176-796f94e83693" class="xr-var-data-in" type="checkbox"><label for="data-92de90b4-ea94-416d-b176-796f94e83693" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Monthly Means of Sea Surface Temperature</dd><dt><span>units :</span></dt><dd>degC</dd><dt><span>var_desc :</span></dt><dd>Sea Surface Temperature</dd><dt><span>level_desc :</span></dt><dd>Surface</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>dataset :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>parent_stat :</span></dt><dd>Individual Values</dd><dt><span>actual_range :</span></dt><dd>[-1.8 42.32636]</dd><dt><span>valid_range :</span></dt><dd>[-1.8 45. ]</dd></dl></div><div class="xr-var-data"><pre>array([[[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
...
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]]<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-d80da5b3-cb6e-48d6-9070-6b54a120685a" class="xr-section-summary-in" type="checkbox"><label for="section-d80da5b3-cb6e-48d6-9070-6b54a120685a" class="xr-section-summary">Attributes: <span>(37)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>climatology :</span></dt><dd>Climatology is based on 1971-2000 SST, Xue, Y., T. M. Smith, and R. W. Reynolds, 2003: Interdecadal changes of 30-yr SST normals during 1871.2000. Journal of Climate, 16, 1601-1612.</dd><dt><span>description :</span></dt><dd>In situ data: ICOADS2.5 before 2007 and NCEP in situ data from 2008 to present. Ice data: HadISST ice before 2010 and NCEP ice after 2010.</dd><dt><span>keywords_vocabulary :</span></dt><dd>NASA Global Change Master Directory (GCMD) Science Keywords</dd><dt><span>keywords :</span></dt><dd>Earth Science &gt; Oceans &gt; Ocean Temperature &gt; Sea Surface Temperature &gt;</dd><dt><span>instrument :</span></dt><dd>Conventional thermometers</dd><dt><span>source_comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets) or Engine Room Intaker</dd><dt><span>geospatial_lon_min :</span></dt><dd>-1.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.0</dd><dt><span>geospatial_laty_max :</span></dt><dd>89.0</dd><dt><span>geospatial_laty_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.0</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>cdm_data_type :</span></dt><dd>Grid</dd><dt><span>project :</span></dt><dd>NOAA Extended Reconstructed Sea Surface Temperature (ERSST)</dd><dt><span>original_publisher_url :</span></dt><dd><a target="_blank" rel="noopener" href="http://www.ncdc.noaa.gov" class="uri">http://www.ncdc.noaa.gov</a></dd><dt><span>References :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5" class="uri">https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5</a> at NCEI and <a target="_blank" rel="noopener" href="http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html" class="uri">http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html</a></dd><dt><span>source :</span></dt><dd>In situ data: ICOADS R3.0 before 2015, NCEP in situ GTS from 2016 to present, and Argo SST from 1999 to present. Ice data: HadISST2 ice before 2015, and NCEP ice after 2015</dd><dt><span>title :</span></dt><dd>NOAA ERSSTv5 (in situ only)</dd><dt><span>history :</span></dt><dd>created 07/2017 by PSD data using NCEI's ERSST V5 NetCDF values</dd><dt><span>institution :</span></dt><dd>This version written at NOAA/ESRL PSD: obtained from NOAA/NESDIS/National Centers for Environmental Information and time aggregated. Original Full Source: NOAA/NESDIS/NCEI/CCOG</dd><dt><span>citation :</span></dt><dd>Huang et al, 2017: Extended Reconstructed Sea Surface Temperatures Version 5 (ERSSTv5): Upgrades, Validations, and Intercomparisons. Journal of Climate, <a target="_blank" rel="noopener" href="https://doi.org/10.1175/JCLI-D-16-0836.1" class="uri">https://doi.org/10.1175/JCLI-D-16-0836.1</a></dd><dt><span>platform :</span></dt><dd>Ship and Buoy SSTs from ICOADS R3.0 and NCEP GTS</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table (v40, 25 January 2017)</dd><dt><span>processing_level :</span></dt><dd>NOAA Level 4</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>metadata_link :</span></dt><dd>:metadata_link = <a target="_blank" rel="noopener" href="https://doi.org/10.7289/V5T72FNM" class="uri">https://doi.org/10.7289/V5T72FNM</a> (original format)</dd><dt><span>creator_name :</span></dt><dd>Boyin Huang (original)</dd><dt><span>date_created :</span></dt><dd>2017-06-30T12:18:00Z (original)</dd><dt><span>product_version :</span></dt><dd>Version 5</dd><dt><span>creator_url_original :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncei.noaa.gov" class="uri">https://www.ncei.noaa.gov</a></dd><dt><span>license :</span></dt><dd>No constraints on data access or use</dd><dt><span>comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets), Engine Room Intakers, or floats and drifters</dd><dt><span>summary :</span></dt><dd>ERSST.v5 is developed based on v4 after revisions of 8 parameters using updated data sets and advanced knowledge of ERSST analysis</dd><dt><span>dataset_title :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>data_modified :</span></dt><dd>2021-01-01</dd></dl></div></li></ul></div></div><h4 id="逐个访问-groupby对象">逐个访问 <strong>groupby对象</strong></h4><p>除了可以使用循环的方法对各个分组进行遍历，也可直接使用python中 <strong>列表</strong> 的访问方法访问各个分组。<br>通过对list对象的第一个分组的访问可以获得分组名称和对应的xarray数据.</p><p>先来尝试访问一下第一个（python中的第一个元素的索引由0开始）分组的信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(gb)[<span class="number">0</span>] <span class="comment">#访问第一个分组</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">(1,</span><br><span class="line"> &lt;xarray.Dataset&gt;</span><br><span class="line"> Dimensions:  (lat: 89, lon: 180, time: 59)</span><br><span class="line"> Coordinates:</span><br><span class="line">   * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">   * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br><span class="line">   * time     (time) datetime64[ns] 1960-01-01 1961-01-01 ... 2018-01-01</span><br><span class="line"> Data variables:</span><br><span class="line">     sst      (time, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan</span><br><span class="line"> Attributes: (12/37)</span><br><span class="line">     climatology:               Climatology is based on 1971-2000 SST, Xue, Y....</span><br><span class="line">     description:               In situ data: ICOADS2.5 before 2007 and NCEP i...</span><br><span class="line">     keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...</span><br><span class="line">     keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...</span><br><span class="line">     instrument:                Conventional thermometers</span><br><span class="line">     source_comment:            SSTs were observed by conventional thermometer...</span><br><span class="line">     ...                        ...</span><br><span class="line">     creator_url_original:      https://www.ncei.noaa.gov</span><br><span class="line">     license:                   No constraints on data access or use</span><br><span class="line">     comment:                   SSTs were observed by conventional thermometer...</span><br><span class="line">     summary:                   ERSST.v5 is developed based on v4 after revisi...</span><br><span class="line">     dataset_title:             NOAA Extended Reconstructed SST V5</span><br><span class="line">     data_modified:             2021-01-01)</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(gb)[<span class="number">0</span>][<span class="number">0</span>] <span class="comment"># 第一个分组的名称</span></span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(gb)[<span class="number">0</span>][<span class="number">1</span>] <span class="comment"># 第一个分组的数据</span></span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 59)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1961-01-01 ... 2018-01-01
Data variables:
    sst      (time, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan
Attributes: (12/37)
    climatology:               Climatology is based on 1971-2000 SST, Xue, Y....
    description:               In situ data: ICOADS2.5 before 2007 and NCEP i...
    keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...
    keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...
    instrument:                Conventional thermometers
    source_comment:            SSTs were observed by conventional thermometer...
    ...                        ...
    creator_url_original:      <https :>
    license:                   No constraints on data access or use
    comment:                   SSTs were observed by conventional thermometer...
    summary:                   ERSST.v5 is developed based on v4 after revisi...
    dataset_title:             NOAA Extended Reconstructed SST V5
    data_modified:             2021-01-01</https></pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-e4d50f59-7212-445a-bd88-62550730073d" class="xr-section-summary-in" type="checkbox" disabled><label for="section-e4d50f59-7212-445a-bd88-62550730073d" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 59</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-346ae079-2eda-4474-9333-940ccabc0c48" class="xr-section-summary-in" type="checkbox" checked><label for="section-346ae079-2eda-4474-9333-940ccabc0c48" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-c288a7bd-61ac-4e57-9760-33fe342dfa29" class="xr-var-attrs-in" type="checkbox"><label for="attrs-c288a7bd-61ac-4e57-9760-33fe342dfa29" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-a0408c6d-9deb-4831-8c32-ed41243e5783" class="xr-var-data-in" type="checkbox"><label for="data-a0408c6d-9deb-4831-8c32-ed41243e5783" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-a6a4fa3e-0712-4d10-936e-2fc50ff69c96" class="xr-var-attrs-in" type="checkbox"><label for="attrs-a6a4fa3e-0712-4d10-936e-2fc50ff69c96" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-87286336-9a06-48b4-82b0-9269d31ced34" class="xr-var-data-in" type="checkbox"><label for="data-87286336-9a06-48b4-82b0-9269d31ced34" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-01-01</div><input id="attrs-403b448c-05a0-4014-8ace-d8cd16d44f9a" class="xr-var-attrs-in" type="checkbox"><label for="attrs-403b448c-05a0-4014-8ace-d8cd16d44f9a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-01d7f01b-26ef-43f3-90fe-c12cf542cd9b" class="xr-var-data-in" type="checkbox"><label for="data-01d7f01b-26ef-43f3-90fe-c12cf542cd9b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1961-01-01T00:00:00.000000000',
       '1962-01-01T00:00:00.000000000', '1963-01-01T00:00:00.000000000',
       '1964-01-01T00:00:00.000000000', '1965-01-01T00:00:00.000000000',
       '1966-01-01T00:00:00.000000000', '1967-01-01T00:00:00.000000000',
       '1968-01-01T00:00:00.000000000', '1969-01-01T00:00:00.000000000',
       '1970-01-01T00:00:00.000000000', '1971-01-01T00:00:00.000000000',
       '1972-01-01T00:00:00.000000000', '1973-01-01T00:00:00.000000000',
       '1974-01-01T00:00:00.000000000', '1975-01-01T00:00:00.000000000',
       '1976-01-01T00:00:00.000000000', '1977-01-01T00:00:00.000000000',
       '1978-01-01T00:00:00.000000000', '1979-01-01T00:00:00.000000000',
       '1980-01-01T00:00:00.000000000', '1981-01-01T00:00:00.000000000',
       '1982-01-01T00:00:00.000000000', '1983-01-01T00:00:00.000000000',
       '1984-01-01T00:00:00.000000000', '1985-01-01T00:00:00.000000000',
       '1986-01-01T00:00:00.000000000', '1987-01-01T00:00:00.000000000',
       '1988-01-01T00:00:00.000000000', '1989-01-01T00:00:00.000000000',
       '1990-01-01T00:00:00.000000000', '1991-01-01T00:00:00.000000000',
       '1992-01-01T00:00:00.000000000', '1993-01-01T00:00:00.000000000',
       '1994-01-01T00:00:00.000000000', '1995-01-01T00:00:00.000000000',
       '1996-01-01T00:00:00.000000000', '1997-01-01T00:00:00.000000000',
       '1998-01-01T00:00:00.000000000', '1999-01-01T00:00:00.000000000',
       '2000-01-01T00:00:00.000000000', '2001-01-01T00:00:00.000000000',
       '2002-01-01T00:00:00.000000000', '2003-01-01T00:00:00.000000000',
       '2004-01-01T00:00:00.000000000', '2005-01-01T00:00:00.000000000',
       '2006-01-01T00:00:00.000000000', '2007-01-01T00:00:00.000000000',
       '2008-01-01T00:00:00.000000000', '2009-01-01T00:00:00.000000000',
       '2010-01-01T00:00:00.000000000', '2011-01-01T00:00:00.000000000',
       '2012-01-01T00:00:00.000000000', '2013-01-01T00:00:00.000000000',
       '2014-01-01T00:00:00.000000000', '2015-01-01T00:00:00.000000000',
       '2016-01-01T00:00:00.000000000', '2017-01-01T00:00:00.000000000',
       '2018-01-01T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-110d334e-c462-4834-b440-51ae0be54d58" class="xr-section-summary-in" type="checkbox" checked><label for="section-110d334e-c462-4834-b440-51ae0be54d58" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 -1.8 ... nan nan nan</div><input id="attrs-4b135e2c-4654-4116-964c-d3432c80b194" class="xr-var-attrs-in" type="checkbox"><label for="attrs-4b135e2c-4654-4116-964c-d3432c80b194" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-0a3ce8cb-edce-49f9-8530-c5ccfcb034b2" class="xr-var-data-in" type="checkbox"><label for="data-0a3ce8cb-edce-49f9-8530-c5ccfcb034b2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Monthly Means of Sea Surface Temperature</dd><dt><span>units :</span></dt><dd>degC</dd><dt><span>var_desc :</span></dt><dd>Sea Surface Temperature</dd><dt><span>level_desc :</span></dt><dd>Surface</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>dataset :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>parent_stat :</span></dt><dd>Individual Values</dd><dt><span>actual_range :</span></dt><dd>[-1.8 42.32636]</dd><dt><span>valid_range :</span></dt><dd>[-1.8 45. ]</dd></dl></div><div class="xr-var-data"><pre>array([[[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
...
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-5083ee86-b5b5-441b-b191-65d7f97c2ada" class="xr-section-summary-in" type="checkbox"><label for="section-5083ee86-b5b5-441b-b191-65d7f97c2ada" class="xr-section-summary">Attributes: <span>(37)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>climatology :</span></dt><dd>Climatology is based on 1971-2000 SST, Xue, Y., T. M. Smith, and R. W. Reynolds, 2003: Interdecadal changes of 30-yr SST normals during 1871.2000. Journal of Climate, 16, 1601-1612.</dd><dt><span>description :</span></dt><dd>In situ data: ICOADS2.5 before 2007 and NCEP in situ data from 2008 to present. Ice data: HadISST ice before 2010 and NCEP ice after 2010.</dd><dt><span>keywords_vocabulary :</span></dt><dd>NASA Global Change Master Directory (GCMD) Science Keywords</dd><dt><span>keywords :</span></dt><dd>Earth Science &gt; Oceans &gt; Ocean Temperature &gt; Sea Surface Temperature &gt;</dd><dt><span>instrument :</span></dt><dd>Conventional thermometers</dd><dt><span>source_comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets) or Engine Room Intaker</dd><dt><span>geospatial_lon_min :</span></dt><dd>-1.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.0</dd><dt><span>geospatial_laty_max :</span></dt><dd>89.0</dd><dt><span>geospatial_laty_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.0</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>cdm_data_type :</span></dt><dd>Grid</dd><dt><span>project :</span></dt><dd>NOAA Extended Reconstructed Sea Surface Temperature (ERSST)</dd><dt><span>original_publisher_url :</span></dt><dd><a target="_blank" rel="noopener" href="http://www.ncdc.noaa.gov" class="uri">http://www.ncdc.noaa.gov</a></dd><dt><span>References :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5" class="uri">https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5</a> at NCEI and <a target="_blank" rel="noopener" href="http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html" class="uri">http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html</a></dd><dt><span>source :</span></dt><dd>In situ data: ICOADS R3.0 before 2015, NCEP in situ GTS from 2016 to present, and Argo SST from 1999 to present. Ice data: HadISST2 ice before 2015, and NCEP ice after 2015</dd><dt><span>title :</span></dt><dd>NOAA ERSSTv5 (in situ only)</dd><dt><span>history :</span></dt><dd>created 07/2017 by PSD data using NCEI's ERSST V5 NetCDF values</dd><dt><span>institution :</span></dt><dd>This version written at NOAA/ESRL PSD: obtained from NOAA/NESDIS/National Centers for Environmental Information and time aggregated. Original Full Source: NOAA/NESDIS/NCEI/CCOG</dd><dt><span>citation :</span></dt><dd>Huang et al, 2017: Extended Reconstructed Sea Surface Temperatures Version 5 (ERSSTv5): Upgrades, Validations, and Intercomparisons. Journal of Climate, <a target="_blank" rel="noopener" href="https://doi.org/10.1175/JCLI-D-16-0836.1" class="uri">https://doi.org/10.1175/JCLI-D-16-0836.1</a></dd><dt><span>platform :</span></dt><dd>Ship and Buoy SSTs from ICOADS R3.0 and NCEP GTS</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table (v40, 25 January 2017)</dd><dt><span>processing_level :</span></dt><dd>NOAA Level 4</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>metadata_link :</span></dt><dd>:metadata_link = <a target="_blank" rel="noopener" href="https://doi.org/10.7289/V5T72FNM" class="uri">https://doi.org/10.7289/V5T72FNM</a> (original format)</dd><dt><span>creator_name :</span></dt><dd>Boyin Huang (original)</dd><dt><span>date_created :</span></dt><dd>2017-06-30T12:18:00Z (original)</dd><dt><span>product_version :</span></dt><dd>Version 5</dd><dt><span>creator_url_original :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncei.noaa.gov" class="uri">https://www.ncei.noaa.gov</a></dd><dt><span>license :</span></dt><dd>No constraints on data access or use</dd><dt><span>comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets), Engine Room Intakers, or floats and drifters</dd><dt><span>summary :</span></dt><dd>ERSST.v5 is developed based on v4 after revisions of 8 parameters using updated data sets and advanced knowledge of ERSST analysis</dd><dt><span>dataset_title :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>data_modified :</span></dt><dd>2021-01-01</dd></dl></div></li></ul></div></div><p>我们可以对上述的三步简写为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(gb)[<span class="number">0</span>][<span class="number">1</span>] <span class="comment"># 等效为list_first_group[1]</span></span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 59)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1961-01-01 ... 2018-01-01
Data variables:
    sst      (time, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan
Attributes: (12/37)
    climatology:               Climatology is based on 1971-2000 SST, Xue, Y....
    description:               In situ data: ICOADS2.5 before 2007 and NCEP i...
    keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...
    keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...
    instrument:                Conventional thermometers
    source_comment:            SSTs were observed by conventional thermometer...
    ...                        ...
    creator_url_original:      <https :>
    license:                   No constraints on data access or use
    comment:                   SSTs were observed by conventional thermometer...
    summary:                   ERSST.v5 is developed based on v4 after revisi...
    dataset_title:             NOAA Extended Reconstructed SST V5
    data_modified:             2021-01-01</https></pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-b431ec20-50d8-4f84-8049-7d0f59587251" class="xr-section-summary-in" type="checkbox" disabled><label for="section-b431ec20-50d8-4f84-8049-7d0f59587251" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 59</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-e20c9a8b-96f7-4a8f-9530-a098c3eeebb7" class="xr-section-summary-in" type="checkbox" checked><label for="section-e20c9a8b-96f7-4a8f-9530-a098c3eeebb7" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-5539ed04-defb-4e52-9d40-ad9d60782dca" class="xr-var-attrs-in" type="checkbox"><label for="attrs-5539ed04-defb-4e52-9d40-ad9d60782dca" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-69a95c3b-769f-4efc-8951-d8d1ac55961c" class="xr-var-data-in" type="checkbox"><label for="data-69a95c3b-769f-4efc-8951-d8d1ac55961c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-f449e4ba-326a-495b-bfe7-09bcaf09522d" class="xr-var-attrs-in" type="checkbox"><label for="attrs-f449e4ba-326a-495b-bfe7-09bcaf09522d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-7cb4573d-2bb8-4ff4-84f0-4a4a6c84546b" class="xr-var-data-in" type="checkbox"><label for="data-7cb4573d-2bb8-4ff4-84f0-4a4a6c84546b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-01-01</div><input id="attrs-6b065e9a-96bf-4777-a7a8-241c41bd9840" class="xr-var-attrs-in" type="checkbox"><label for="attrs-6b065e9a-96bf-4777-a7a8-241c41bd9840" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-96dbd82d-095f-4ee6-b3bd-53713eb573bd" class="xr-var-data-in" type="checkbox"><label for="data-96dbd82d-095f-4ee6-b3bd-53713eb573bd" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1961-01-01T00:00:00.000000000',
       '1962-01-01T00:00:00.000000000', '1963-01-01T00:00:00.000000000',
       '1964-01-01T00:00:00.000000000', '1965-01-01T00:00:00.000000000',
       '1966-01-01T00:00:00.000000000', '1967-01-01T00:00:00.000000000',
       '1968-01-01T00:00:00.000000000', '1969-01-01T00:00:00.000000000',
       '1970-01-01T00:00:00.000000000', '1971-01-01T00:00:00.000000000',
       '1972-01-01T00:00:00.000000000', '1973-01-01T00:00:00.000000000',
       '1974-01-01T00:00:00.000000000', '1975-01-01T00:00:00.000000000',
       '1976-01-01T00:00:00.000000000', '1977-01-01T00:00:00.000000000',
       '1978-01-01T00:00:00.000000000', '1979-01-01T00:00:00.000000000',
       '1980-01-01T00:00:00.000000000', '1981-01-01T00:00:00.000000000',
       '1982-01-01T00:00:00.000000000', '1983-01-01T00:00:00.000000000',
       '1984-01-01T00:00:00.000000000', '1985-01-01T00:00:00.000000000',
       '1986-01-01T00:00:00.000000000', '1987-01-01T00:00:00.000000000',
       '1988-01-01T00:00:00.000000000', '1989-01-01T00:00:00.000000000',
       '1990-01-01T00:00:00.000000000', '1991-01-01T00:00:00.000000000',
       '1992-01-01T00:00:00.000000000', '1993-01-01T00:00:00.000000000',
       '1994-01-01T00:00:00.000000000', '1995-01-01T00:00:00.000000000',
       '1996-01-01T00:00:00.000000000', '1997-01-01T00:00:00.000000000',
       '1998-01-01T00:00:00.000000000', '1999-01-01T00:00:00.000000000',
       '2000-01-01T00:00:00.000000000', '2001-01-01T00:00:00.000000000',
       '2002-01-01T00:00:00.000000000', '2003-01-01T00:00:00.000000000',
       '2004-01-01T00:00:00.000000000', '2005-01-01T00:00:00.000000000',
       '2006-01-01T00:00:00.000000000', '2007-01-01T00:00:00.000000000',
       '2008-01-01T00:00:00.000000000', '2009-01-01T00:00:00.000000000',
       '2010-01-01T00:00:00.000000000', '2011-01-01T00:00:00.000000000',
       '2012-01-01T00:00:00.000000000', '2013-01-01T00:00:00.000000000',
       '2014-01-01T00:00:00.000000000', '2015-01-01T00:00:00.000000000',
       '2016-01-01T00:00:00.000000000', '2017-01-01T00:00:00.000000000',
       '2018-01-01T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-05756ca9-50fd-4d2b-960a-e14172c745a3" class="xr-section-summary-in" type="checkbox" checked><label for="section-05756ca9-50fd-4d2b-960a-e14172c745a3" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 -1.8 ... nan nan nan</div><input id="attrs-6e9243fe-eefe-42a5-bdec-054d5feef2cc" class="xr-var-attrs-in" type="checkbox"><label for="attrs-6e9243fe-eefe-42a5-bdec-054d5feef2cc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-b4caefed-c1b3-4a24-b6cf-4f7eb61937d6" class="xr-var-data-in" type="checkbox"><label for="data-b4caefed-c1b3-4a24-b6cf-4f7eb61937d6" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Monthly Means of Sea Surface Temperature</dd><dt><span>units :</span></dt><dd>degC</dd><dt><span>var_desc :</span></dt><dd>Sea Surface Temperature</dd><dt><span>level_desc :</span></dt><dd>Surface</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>dataset :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>parent_stat :</span></dt><dd>Individual Values</dd><dt><span>actual_range :</span></dt><dd>[-1.8 42.32636]</dd><dt><span>valid_range :</span></dt><dd>[-1.8 45. ]</dd></dl></div><div class="xr-var-data"><pre>array([[[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
...
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]],<br>
       [[-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        [-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8],
        ...,
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan],
        [ nan,  nan,  nan, ...,  nan,  nan,  nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-ffe96d8e-7ffd-41d0-911c-27a754c6c005" class="xr-section-summary-in" type="checkbox"><label for="section-ffe96d8e-7ffd-41d0-911c-27a754c6c005" class="xr-section-summary">Attributes: <span>(37)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>climatology :</span></dt><dd>Climatology is based on 1971-2000 SST, Xue, Y., T. M. Smith, and R. W. Reynolds, 2003: Interdecadal changes of 30-yr SST normals during 1871.2000. Journal of Climate, 16, 1601-1612.</dd><dt><span>description :</span></dt><dd>In situ data: ICOADS2.5 before 2007 and NCEP in situ data from 2008 to present. Ice data: HadISST ice before 2010 and NCEP ice after 2010.</dd><dt><span>keywords_vocabulary :</span></dt><dd>NASA Global Change Master Directory (GCMD) Science Keywords</dd><dt><span>keywords :</span></dt><dd>Earth Science &gt; Oceans &gt; Ocean Temperature &gt; Sea Surface Temperature &gt;</dd><dt><span>instrument :</span></dt><dd>Conventional thermometers</dd><dt><span>source_comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets) or Engine Room Intaker</dd><dt><span>geospatial_lon_min :</span></dt><dd>-1.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.0</dd><dt><span>geospatial_laty_max :</span></dt><dd>89.0</dd><dt><span>geospatial_laty_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.0</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>cdm_data_type :</span></dt><dd>Grid</dd><dt><span>project :</span></dt><dd>NOAA Extended Reconstructed Sea Surface Temperature (ERSST)</dd><dt><span>original_publisher_url :</span></dt><dd><a target="_blank" rel="noopener" href="http://www.ncdc.noaa.gov" class="uri">http://www.ncdc.noaa.gov</a></dd><dt><span>References :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5" class="uri">https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5</a> at NCEI and <a target="_blank" rel="noopener" href="http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html" class="uri">http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html</a></dd><dt><span>source :</span></dt><dd>In situ data: ICOADS R3.0 before 2015, NCEP in situ GTS from 2016 to present, and Argo SST from 1999 to present. Ice data: HadISST2 ice before 2015, and NCEP ice after 2015</dd><dt><span>title :</span></dt><dd>NOAA ERSSTv5 (in situ only)</dd><dt><span>history :</span></dt><dd>created 07/2017 by PSD data using NCEI's ERSST V5 NetCDF values</dd><dt><span>institution :</span></dt><dd>This version written at NOAA/ESRL PSD: obtained from NOAA/NESDIS/National Centers for Environmental Information and time aggregated. Original Full Source: NOAA/NESDIS/NCEI/CCOG</dd><dt><span>citation :</span></dt><dd>Huang et al, 2017: Extended Reconstructed Sea Surface Temperatures Version 5 (ERSSTv5): Upgrades, Validations, and Intercomparisons. Journal of Climate, <a target="_blank" rel="noopener" href="https://doi.org/10.1175/JCLI-D-16-0836.1" class="uri">https://doi.org/10.1175/JCLI-D-16-0836.1</a></dd><dt><span>platform :</span></dt><dd>Ship and Buoy SSTs from ICOADS R3.0 and NCEP GTS</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table (v40, 25 January 2017)</dd><dt><span>processing_level :</span></dt><dd>NOAA Level 4</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>metadata_link :</span></dt><dd>:metadata_link = <a target="_blank" rel="noopener" href="https://doi.org/10.7289/V5T72FNM" class="uri">https://doi.org/10.7289/V5T72FNM</a> (original format)</dd><dt><span>creator_name :</span></dt><dd>Boyin Huang (original)</dd><dt><span>date_created :</span></dt><dd>2017-06-30T12:18:00Z (original)</dd><dt><span>product_version :</span></dt><dd>Version 5</dd><dt><span>creator_url_original :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncei.noaa.gov" class="uri">https://www.ncei.noaa.gov</a></dd><dt><span>license :</span></dt><dd>No constraints on data access or use</dd><dt><span>comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets), Engine Room Intakers, or floats and drifters</dd><dt><span>summary :</span></dt><dd>ERSST.v5 is developed based on v4 after revisions of 8 parameters using updated data sets and advanced knowledge of ERSST analysis</dd><dt><span>dataset_title :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>data_modified :</span></dt><dd>2021-01-01</dd></dl></div></li></ul></div></div><h4 id="查找各个分组中对应元素在原始数据中键的位置">查找各个分组中对应元素在原始数据中键的位置</h4><p><strong><em>groupby.groups</em></strong></p><p>以 字典 形式返回各个分组（在这儿是month）中的元素在原分组坐标中（在这儿是time）的位置</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gb.groups.keys()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dict_keys([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12])</span><br></pre></td></tr></table></figure><p>上述说明了gb将数据分为了12组，每个组的名字分别为1、2……12，其中名字为1的组（即一月）中包含了时间序列中第0个、第12个……<br>时间序列中第0个可理解为ds.isel(time = 0)，同理第12个可理解为ds.isel(time = 12).</p><h3 id="分箱binning">分箱（Binning）</h3><p>分箱（Binning），顾名思义如果要对数据进行筛选，可以指定分箱规则对数据进行筛选。<br>分箱与分割有所不同。分箱针对的对象是对数据指定规则，而分割针对维度坐标指定规则。<br>xarray中的分箱方法基于pandas.cut()实现</p><p>以 筛选出数据第0时刻 海温低于零摄氏度的格点位置和相应的海温数据 为例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds_0 = ds.isel(time = [<span class="number">0</span>])</span><br></pre></td></tr></table></figure><h4 id="根据分箱创建-groupby对象">根据分箱，创建 <strong>groupby对象</strong></h4><p><strong><em>ds.groupby_bins( data_var, bin, labels )</em></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sst_bin = [-<span class="number">10</span>, <span class="number">0</span>, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>] <span class="comment"># sst_bin是声明的分箱数组的间隔段。</span></span><br><span class="line">sst_bin_label = [<span class="string">"-10℃-0℃"</span>, <span class="string">"0℃-10℃"</span>, <span class="string">"10℃-20℃"</span>, <span class="string">"20℃-30℃"</span>] <span class="comment"># sst_bin_label指定了每一个分箱区间的标签，</span></span><br><span class="line"><span class="comment"># 如果不想手动指定，在.groupby_bins方法中不写labels参数即可，这时候将由pandas.cut分配标签。</span></span><br><span class="line">sst_gb = ds_0.groupby_bins(<span class="string">"sst"</span>, sst_bin, labels = sst_bin_label)</span><br><span class="line"><span class="comment"># .groupby_bins方法即对数据进行分箱的方法，应当指出分箱的方法的作用对象为DataSet而非DataArray </span></span><br><span class="line"><span class="comment"># 方法的第一个参数sst表明对mydatasplit这个DataSet对象的sst变量进行分箱。而后的sst_bin定义了如何进行分箱。labels定义了各个箱子的标签。</span></span><br></pre></td></tr></table></figure><h4 id="迭代访问-groupby-对象">迭代访问 <strong>groupby 对象</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> group_name, group_ds <span class="keyword">in</span> sst_gb:</span><br><span class="line">    display(group_ds)</span><br><span class="line">    <span class="keyword">break</span></span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:               (stacked_time_lat_lon: 2272)
Coordinates:

* stacked_time_lat_lon  (stacked_time_lat_lon) MultiIndex

* time                  (stacked_time_lat_lon) datetime64[ns] 1960-01-01 .....
* lat                   (stacked_time_lat_lon) float64 88.0 88.0 ... -76.0
* lon                   (stacked_time_lat_lon) float64 0.0 2.0 ... 330.0 332.0
Data variables:
    sst                   (stacked_time_lat_lon) float32 -1.8 -1.8 ... -1.8 -1.8
Attributes: (12/37)
    climatology:               Climatology is based on 1971-2000 SST, Xue, Y....
    description:               In situ data: ICOADS2.5 before 2007 and NCEP i...
    keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...
    keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...
    instrument:                Conventional thermometers
    source_comment:            SSTs were observed by conventional thermometer...
    ...                        ...
    creator_url_original:      <https :>
    license:                   No constraints on data access or use
    comment:                   SSTs were observed by conventional thermometer...
    summary:                   ERSST.v5 is developed based on v4 after revisi...
    dataset_title:             NOAA Extended Reconstructed SST V5
    data_modified:             2021-01-01</https></pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-ccd4079c-49ba-4cbe-a348-665f147d553a" class="xr-section-summary-in" type="checkbox" disabled><label for="section-ccd4079c-49ba-4cbe-a348-665f147d553a" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">stacked_time_lat_lon</span>: 2272</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-badfd072-a306-4510-b4ec-8f3a0cbb6418" class="xr-section-summary-in" type="checkbox" checked><label for="section-badfd072-a306-4510-b4ec-8f3a0cbb6418" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">stacked_time_lat_lon</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">MultiIndex</div><div class="xr-var-preview xr-preview">(time, lat, lon)</div><input id="attrs-ce0cbb63-1158-49e4-879f-1e760bc7a15f" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-ce0cbb63-1158-49e4-879f-1e760bc7a15f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-717f7ad4-16c8-4381-8d76-577996266271" class="xr-var-data-in" type="checkbox"><label for="data-717f7ad4-16c8-4381-8d76-577996266271" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([(Timestamp('1960-01-01 00:00:00'), 88.0, 0.0),
       (Timestamp('1960-01-01 00:00:00'), 88.0, 2.0),
       (Timestamp('1960-01-01 00:00:00'), 88.0, 4.0), ...,
       (Timestamp('1960-01-01 00:00:00'), -76.0, 328.0),
       (Timestamp('1960-01-01 00:00:00'), -76.0, 330.0),
       (Timestamp('1960-01-01 00:00:00'), -76.0, 332.0)], dtype=object)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>time</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 1960-01-01</div><input id="attrs-19e9ce54-94bd-4b64-a505-d8ae648e02dc" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-19e9ce54-94bd-4b64-a505-d8ae648e02dc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-94a36094-5667-4f50-ac48-c9b759170507" class="xr-var-data-in" type="checkbox"><label for="data-94a36094-5667-4f50-ac48-c9b759170507" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1960-01-01T00:00:00.000000000',
       '1960-01-01T00:00:00.000000000', ..., '1960-01-01T00:00:00.000000000',
       '1960-01-01T00:00:00.000000000', '1960-01-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lat</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">88.0 88.0 88.0 ... -76.0 -76.0</div><input id="attrs-34f6ac80-14e8-407b-9fe2-704c60700628" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-34f6ac80-14e8-407b-9fe2-704c60700628" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-df040837-c444-436c-8884-f878b65335a2" class="xr-var-data-in" type="checkbox"><label for="data-df040837-c444-436c-8884-f878b65335a2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 88.,  88.,  88., ..., -76., -76., -76.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lon</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 328.0 330.0 332.0</div><input id="attrs-f36c0d4f-8009-4299-bc5b-9267d3048bba" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-f36c0d4f-8009-4299-bc5b-9267d3048bba" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-4a98c0a5-dc60-4394-9b2c-af900d995aa5" class="xr-var-data-in" type="checkbox"><label for="data-4a98c0a5-dc60-4394-9b2c-af900d995aa5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4., ..., 328., 330., 332.])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-9264d867-46f5-43e7-88ce-d29a15e49af2" class="xr-section-summary-in" type="checkbox" checked><label for="section-9264d867-46f5-43e7-88ce-d29a15e49af2" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 ... -1.8 -1.8 -1.8</div><input id="attrs-b7e58772-ca10-4107-bfa2-25915d567010" class="xr-var-attrs-in" type="checkbox"><label for="attrs-b7e58772-ca10-4107-bfa2-25915d567010" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-02c96519-8885-4e85-ac96-471d7039aa8d" class="xr-var-data-in" type="checkbox"><label for="data-02c96519-8885-4e85-ac96-471d7039aa8d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Monthly Means of Sea Surface Temperature</dd><dt><span>units :</span></dt><dd>degC</dd><dt><span>var_desc :</span></dt><dd>Sea Surface Temperature</dd><dt><span>level_desc :</span></dt><dd>Surface</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>dataset :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>parent_stat :</span></dt><dd>Individual Values</dd><dt><span>actual_range :</span></dt><dd>[-1.8 42.32636]</dd><dt><span>valid_range :</span></dt><dd>[-1.8 45. ]</dd></dl></div><div class="xr-var-data"><pre>array([-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-59ea1d12-60d7-47d7-9524-6836342dbd9b" class="xr-section-summary-in" type="checkbox"><label for="section-59ea1d12-60d7-47d7-9524-6836342dbd9b" class="xr-section-summary">Attributes: <span>(37)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>climatology :</span></dt><dd>Climatology is based on 1971-2000 SST, Xue, Y., T. M. Smith, and R. W. Reynolds, 2003: Interdecadal changes of 30-yr SST normals during 1871.2000. Journal of Climate, 16, 1601-1612.</dd><dt><span>description :</span></dt><dd>In situ data: ICOADS2.5 before 2007 and NCEP in situ data from 2008 to present. Ice data: HadISST ice before 2010 and NCEP ice after 2010.</dd><dt><span>keywords_vocabulary :</span></dt><dd>NASA Global Change Master Directory (GCMD) Science Keywords</dd><dt><span>keywords :</span></dt><dd>Earth Science &gt; Oceans &gt; Ocean Temperature &gt; Sea Surface Temperature &gt;</dd><dt><span>instrument :</span></dt><dd>Conventional thermometers</dd><dt><span>source_comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets) or Engine Room Intaker</dd><dt><span>geospatial_lon_min :</span></dt><dd>-1.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.0</dd><dt><span>geospatial_laty_max :</span></dt><dd>89.0</dd><dt><span>geospatial_laty_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.0</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>cdm_data_type :</span></dt><dd>Grid</dd><dt><span>project :</span></dt><dd>NOAA Extended Reconstructed Sea Surface Temperature (ERSST)</dd><dt><span>original_publisher_url :</span></dt><dd><a target="_blank" rel="noopener" href="http://www.ncdc.noaa.gov" class="uri">http://www.ncdc.noaa.gov</a></dd><dt><span>References :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5" class="uri">https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5</a> at NCEI and <a target="_blank" rel="noopener" href="http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html" class="uri">http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html</a></dd><dt><span>source :</span></dt><dd>In situ data: ICOADS R3.0 before 2015, NCEP in situ GTS from 2016 to present, and Argo SST from 1999 to present. Ice data: HadISST2 ice before 2015, and NCEP ice after 2015</dd><dt><span>title :</span></dt><dd>NOAA ERSSTv5 (in situ only)</dd><dt><span>history :</span></dt><dd>created 07/2017 by PSD data using NCEI's ERSST V5 NetCDF values</dd><dt><span>institution :</span></dt><dd>This version written at NOAA/ESRL PSD: obtained from NOAA/NESDIS/National Centers for Environmental Information and time aggregated. Original Full Source: NOAA/NESDIS/NCEI/CCOG</dd><dt><span>citation :</span></dt><dd>Huang et al, 2017: Extended Reconstructed Sea Surface Temperatures Version 5 (ERSSTv5): Upgrades, Validations, and Intercomparisons. Journal of Climate, <a target="_blank" rel="noopener" href="https://doi.org/10.1175/JCLI-D-16-0836.1" class="uri">https://doi.org/10.1175/JCLI-D-16-0836.1</a></dd><dt><span>platform :</span></dt><dd>Ship and Buoy SSTs from ICOADS R3.0 and NCEP GTS</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table (v40, 25 January 2017)</dd><dt><span>processing_level :</span></dt><dd>NOAA Level 4</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>metadata_link :</span></dt><dd>:metadata_link = <a target="_blank" rel="noopener" href="https://doi.org/10.7289/V5T72FNM" class="uri">https://doi.org/10.7289/V5T72FNM</a> (original format)</dd><dt><span>creator_name :</span></dt><dd>Boyin Huang (original)</dd><dt><span>date_created :</span></dt><dd>2017-06-30T12:18:00Z (original)</dd><dt><span>product_version :</span></dt><dd>Version 5</dd><dt><span>creator_url_original :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncei.noaa.gov" class="uri">https://www.ncei.noaa.gov</a></dd><dt><span>license :</span></dt><dd>No constraints on data access or use</dd><dt><span>comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets), Engine Room Intakers, or floats and drifters</dd><dt><span>summary :</span></dt><dd>ERSST.v5 is developed based on v4 after revisions of 8 parameters using updated data sets and advanced knowledge of ERSST analysis</dd><dt><span>dataset_title :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>data_modified :</span></dt><dd>2021-01-01</dd></dl></div></li></ul></div></div><h4 id="逐个访问-groupby-对象">逐个访问 <strong>groupby 对象</strong></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">list</span>(sst_gb)[<span class="number">0</span>][<span class="number">1</span>]</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:               (stacked_time_lat_lon: 2272)
Coordinates:

* stacked_time_lat_lon  (stacked_time_lat_lon) MultiIndex

* time                  (stacked_time_lat_lon) datetime64[ns] 1960-01-01 .....
* lat                   (stacked_time_lat_lon) float64 88.0 88.0 ... -76.0
* lon                   (stacked_time_lat_lon) float64 0.0 2.0 ... 330.0 332.0
Data variables:
    sst                   (stacked_time_lat_lon) float32 -1.8 -1.8 ... -1.8 -1.8
Attributes: (12/37)
    climatology:               Climatology is based on 1971-2000 SST, Xue, Y....
    description:               In situ data: ICOADS2.5 before 2007 and NCEP i...
    keywords_vocabulary:       NASA Global Change Master Directory (GCMD) Sci...
    keywords:                  Earth Science &gt; Oceans &gt; Ocean Temperature &gt; S...
    instrument:                Conventional thermometers
    source_comment:            SSTs were observed by conventional thermometer...
    ...                        ...
    creator_url_original:      <https :>
    license:                   No constraints on data access or use
    comment:                   SSTs were observed by conventional thermometer...
    summary:                   ERSST.v5 is developed based on v4 after revisi...
    dataset_title:             NOAA Extended Reconstructed SST V5
    data_modified:             2021-01-01</https></pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-07321fc2-3808-4676-85c9-c56ed36a58a9" class="xr-section-summary-in" type="checkbox" disabled><label for="section-07321fc2-3808-4676-85c9-c56ed36a58a9" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">stacked_time_lat_lon</span>: 2272</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-b389a5b0-6fc6-4260-8e5c-58cc52fad57b" class="xr-section-summary-in" type="checkbox" checked><label for="section-b389a5b0-6fc6-4260-8e5c-58cc52fad57b" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">stacked_time_lat_lon</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">MultiIndex</div><div class="xr-var-preview xr-preview">(time, lat, lon)</div><input id="attrs-7f4eb9ee-3ad7-4bb1-94bf-b05e8f8e8c5e" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-7f4eb9ee-3ad7-4bb1-94bf-b05e8f8e8c5e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-e8aae6af-6009-45d0-9029-511943a1e3c9" class="xr-var-data-in" type="checkbox"><label for="data-e8aae6af-6009-45d0-9029-511943a1e3c9" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([(Timestamp('1960-01-01 00:00:00'), 88.0, 0.0),
       (Timestamp('1960-01-01 00:00:00'), 88.0, 2.0),
       (Timestamp('1960-01-01 00:00:00'), 88.0, 4.0), ...,
       (Timestamp('1960-01-01 00:00:00'), -76.0, 328.0),
       (Timestamp('1960-01-01 00:00:00'), -76.0, 330.0),
       (Timestamp('1960-01-01 00:00:00'), -76.0, 332.0)], dtype=object)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>time</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 1960-01-01</div><input id="attrs-3cf0f643-073c-4210-b0d8-c535107e17ad" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-3cf0f643-073c-4210-b0d8-c535107e17ad" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-c3928a42-56ff-42e8-861e-0ba490078d83" class="xr-var-data-in" type="checkbox"><label for="data-c3928a42-56ff-42e8-861e-0ba490078d83" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1960-01-01T00:00:00.000000000',
       '1960-01-01T00:00:00.000000000', ..., '1960-01-01T00:00:00.000000000',
       '1960-01-01T00:00:00.000000000', '1960-01-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lat</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">88.0 88.0 88.0 ... -76.0 -76.0</div><input id="attrs-1c363847-0449-4e2f-9a06-3c4634ad7d55" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-1c363847-0449-4e2f-9a06-3c4634ad7d55" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-d4d31dd0-13a8-484b-a9c6-dc09904d9d1b" class="xr-var-data-in" type="checkbox"><label for="data-d4d31dd0-13a8-484b-a9c6-dc09904d9d1b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 88.,  88.,  88., ..., -76., -76., -76.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>lon</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 328.0 330.0 332.0</div><input id="attrs-d729256e-7fb9-47c8-aea3-5f72334c9594" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-d729256e-7fb9-47c8-aea3-5f72334c9594" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-1843bbac-176a-43e4-9856-51a29c76fcf3" class="xr-var-data-in" type="checkbox"><label for="data-1843bbac-176a-43e4-9856-51a29c76fcf3" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4., ..., 328., 330., 332.])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e61c4a50-cc43-4d6a-9ad8-37ab31914c24" class="xr-section-summary-in" type="checkbox" checked><label for="section-e61c4a50-cc43-4d6a-9ad8-37ab31914c24" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(stacked_time_lat_lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 ... -1.8 -1.8 -1.8</div><input id="attrs-013ba29f-4631-4905-9632-58dac24e6480" class="xr-var-attrs-in" type="checkbox"><label for="attrs-013ba29f-4631-4905-9632-58dac24e6480" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-1f11f92c-2bc8-482e-8566-4abc482dce70" class="xr-var-data-in" type="checkbox"><label for="data-1f11f92c-2bc8-482e-8566-4abc482dce70" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Monthly Means of Sea Surface Temperature</dd><dt><span>units :</span></dt><dd>degC</dd><dt><span>var_desc :</span></dt><dd>Sea Surface Temperature</dd><dt><span>level_desc :</span></dt><dd>Surface</dd><dt><span>statistic :</span></dt><dd>Mean</dd><dt><span>dataset :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>parent_stat :</span></dt><dd>Individual Values</dd><dt><span>actual_range :</span></dt><dd>[-1.8 42.32636]</dd><dt><span>valid_range :</span></dt><dd>[-1.8 45. ]</dd></dl></div><div class="xr-var-data"><pre>array([-1.8, -1.8, -1.8, ..., -1.8, -1.8, -1.8], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-7e3e1140-d9df-436c-b500-c3978d90a750" class="xr-section-summary-in" type="checkbox"><label for="section-7e3e1140-d9df-436c-b500-c3978d90a750" class="xr-section-summary">Attributes: <span>(37)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"><dt><span>climatology :</span></dt><dd>Climatology is based on 1971-2000 SST, Xue, Y., T. M. Smith, and R. W. Reynolds, 2003: Interdecadal changes of 30-yr SST normals during 1871.2000. Journal of Climate, 16, 1601-1612.</dd><dt><span>description :</span></dt><dd>In situ data: ICOADS2.5 before 2007 and NCEP in situ data from 2008 to present. Ice data: HadISST ice before 2010 and NCEP ice after 2010.</dd><dt><span>keywords_vocabulary :</span></dt><dd>NASA Global Change Master Directory (GCMD) Science Keywords</dd><dt><span>keywords :</span></dt><dd>Earth Science &gt; Oceans &gt; Ocean Temperature &gt; Sea Surface Temperature &gt;</dd><dt><span>instrument :</span></dt><dd>Conventional thermometers</dd><dt><span>source_comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets) or Engine Room Intaker</dd><dt><span>geospatial_lon_min :</span></dt><dd>-1.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>359.0</dd><dt><span>geospatial_laty_max :</span></dt><dd>89.0</dd><dt><span>geospatial_laty_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>89.0</dd><dt><span>geospatial_lat_min :</span></dt><dd>-89.0</dd><dt><span>geospatial_lat_units :</span></dt><dd>degrees_north</dd><dt><span>geospatial_lon_units :</span></dt><dd>degrees_east</dd><dt><span>cdm_data_type :</span></dt><dd>Grid</dd><dt><span>project :</span></dt><dd>NOAA Extended Reconstructed Sea Surface Temperature (ERSST)</dd><dt><span>original_publisher_url :</span></dt><dd><a target="_blank" rel="noopener" href="http://www.ncdc.noaa.gov" class="uri">http://www.ncdc.noaa.gov</a></dd><dt><span>References :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5" class="uri">https://www.ncdc.noaa.gov/data-access/marineocean-data/extended-reconstructed-sea-surface-temperature-ersst-v5</a> at NCEI and <a target="_blank" rel="noopener" href="http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html" class="uri">http://www.esrl.noaa.gov/psd/data/gridded/data.noaa.ersst.v5.html</a></dd><dt><span>source :</span></dt><dd>In situ data: ICOADS R3.0 before 2015, NCEP in situ GTS from 2016 to present, and Argo SST from 1999 to present. Ice data: HadISST2 ice before 2015, and NCEP ice after 2015</dd><dt><span>title :</span></dt><dd>NOAA ERSSTv5 (in situ only)</dd><dt><span>history :</span></dt><dd>created 07/2017 by PSD data using NCEI's ERSST V5 NetCDF values</dd><dt><span>institution :</span></dt><dd>This version written at NOAA/ESRL PSD: obtained from NOAA/NESDIS/National Centers for Environmental Information and time aggregated. Original Full Source: NOAA/NESDIS/NCEI/CCOG</dd><dt><span>citation :</span></dt><dd>Huang et al, 2017: Extended Reconstructed Sea Surface Temperatures Version 5 (ERSSTv5): Upgrades, Validations, and Intercomparisons. Journal of Climate, <a target="_blank" rel="noopener" href="https://doi.org/10.1175/JCLI-D-16-0836.1" class="uri">https://doi.org/10.1175/JCLI-D-16-0836.1</a></dd><dt><span>platform :</span></dt><dd>Ship and Buoy SSTs from ICOADS R3.0 and NCEP GTS</dd><dt><span>standard_name_vocabulary :</span></dt><dd>CF Standard Name Table (v40, 25 January 2017)</dd><dt><span>processing_level :</span></dt><dd>NOAA Level 4</dd><dt><span>Conventions :</span></dt><dd>CF-1.6, ACDD-1.3</dd><dt><span>metadata_link :</span></dt><dd>:metadata_link = <a target="_blank" rel="noopener" href="https://doi.org/10.7289/V5T72FNM" class="uri">https://doi.org/10.7289/V5T72FNM</a> (original format)</dd><dt><span>creator_name :</span></dt><dd>Boyin Huang (original)</dd><dt><span>date_created :</span></dt><dd>2017-06-30T12:18:00Z (original)</dd><dt><span>product_version :</span></dt><dd>Version 5</dd><dt><span>creator_url_original :</span></dt><dd><a target="_blank" rel="noopener" href="https://www.ncei.noaa.gov" class="uri">https://www.ncei.noaa.gov</a></dd><dt><span>license :</span></dt><dd>No constraints on data access or use</dd><dt><span>comment :</span></dt><dd>SSTs were observed by conventional thermometers in Buckets (insulated or un-insulated canvas and wooded buckets), Engine Room Intakers, or floats and drifters</dd><dt><span>summary :</span></dt><dd>ERSST.v5 is developed based on v4 after revisions of 8 parameters using updated data sets and advanced knowledge of ERSST analysis</dd><dt><span>dataset_title :</span></dt><dd>NOAA Extended Reconstructed SST V5</dd><dt><span>data_modified :</span></dt><dd>2021-01-01</dd></dl></div></li></ul></div></div><h4 id="查看分箱名称及其数据在原始数据对应的位置">查看分箱名称及其数据在原始数据对应的位置</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sst_gb_bin = gb.groups </span><br><span class="line"><span class="comment"># 与分组一节中对gb查找原始键类似，这里对groupby对象（即data0.groupby_bins("sst", sst_bin, labels = sst_bin_label)）</span></span><br><span class="line"><span class="comment"># 添加.groups方法能够获取对应的原始位置。</span></span><br><span class="line"><span class="comment"># gb_bin</span></span><br></pre></td></tr></table></figure><h3 id="groupby-的应用">Groupby 的应用</h3><p>累计：合并分组成为完整的一组<br>转换：对各个分组分别给予计算</p><p>对于应用步骤而言，使用的方法是 .map（映射）.</p><h4 id="累计降维">累计（“降维”）</h4><p><strong><em>groupby.map( function )</em></strong></p><p>对于累计方法，以求解多年各月sst平均空间场为例说明累计的实现方法。</p><p>.map可接受一个 函数 作为其参数。下面我们来传递一个求平均的参数np.mean（此处的函数无括号）：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gb = ds.groupby(<span class="string">"time.month"</span>) <span class="comment">#导入分组数据</span></span><br><span class="line">time_mean = <span class="keyword">lambda</span> a: a.mean(dim=<span class="string">"time"</span>)</span><br><span class="line">gb.<span class="built_in">map</span>(time_mean)</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, month: 12)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* month    (month) int64 1 2 3 4 5 6 7 8 9 10 11 12
Data variables:
    sst      (month, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-0d4ab180-bc5f-41f8-823d-0c50c25e5842" class="xr-section-summary-in" type="checkbox" disabled><label for="section-0d4ab180-bc5f-41f8-823d-0c50c25e5842" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">month</span>: 12</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-ba1dc78b-3df7-4a52-bf65-a9159dc4dd77" class="xr-section-summary-in" type="checkbox" checked><label for="section-ba1dc78b-3df7-4a52-bf65-a9159dc4dd77" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-400ac0ac-5bf4-4c40-9e9f-38f9df225056" class="xr-var-attrs-in" type="checkbox"><label for="attrs-400ac0ac-5bf4-4c40-9e9f-38f9df225056" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-0daa2bdf-fdc0-4da7-ae95-7c51eae934ca" class="xr-var-data-in" type="checkbox"><label for="data-0daa2bdf-fdc0-4da7-ae95-7c51eae934ca" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-c53318c3-2a84-4fcc-8d78-2df97da20383" class="xr-var-attrs-in" type="checkbox"><label for="attrs-c53318c3-2a84-4fcc-8d78-2df97da20383" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-6d2fc959-1dad-4a56-9a4b-774291f5394f" class="xr-var-data-in" type="checkbox"><label for="data-6d2fc959-1dad-4a56-9a4b-774291f5394f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">month</span></div><div class="xr-var-dims">(month)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 2 3 4 5 6 7 8 9 10 11 12</div><input id="attrs-0b6d7680-1717-46c1-a874-27dd664080ed" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-0b6d7680-1717-46c1-a874-27dd664080ed" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-3fcec105-3e20-4347-9f98-8ffc9db5ee13" class="xr-var-data-in" type="checkbox"><label for="data-3fcec105-3e20-4347-9f98-8ffc9db5ee13" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-c015d60d-e1be-4016-a86e-6cfd052733dd" class="xr-section-summary-in" type="checkbox" checked><label for="section-c015d60d-e1be-4016-a86e-6cfd052733dd" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(month, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 -1.8 ... nan nan nan</div><input id="attrs-9fe7e101-5e54-4618-b9d5-d9290f4267e4" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-9fe7e101-5e54-4618-b9d5-d9290f4267e4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-cba47550-c87e-417b-9316-fe15c4005fe1" class="xr-var-data-in" type="checkbox"><label for="data-cba47550-c87e-417b-9316-fe15c4005fe1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        ...,
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]],<br>
       [[-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
...
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]],<br>
       [[-1.7994629, -1.7995554, -1.7998236, ..., -1.7997916,
         -1.7996355, -1.7994715],
        [-1.7995405, -1.7997376, -1.8000009, ..., -1.8000009,
         -1.7998223, -1.7995865],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        ...,
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-7fd9e083-9002-4c19-bc9f-96fe18a3e8d9" class="xr-section-summary-in" type="checkbox" disabled><label for="section-7fd9e083-9002-4c19-bc9f-96fe18a3e8d9" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>与Pandas包一样，xarray的groupby对象也内置许多的累计（aggregation）操作（如mean, min, max, std等）.<br>这些内置操作能够简化上述常用操作代码的书写。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 这与上述的自定义函数的功能相同</span></span><br><span class="line">gb.mean(dim=<span class="string">"time"</span>)</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, month: 12)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* month    (month) int64 1 2 3 4 5 6 7 8 9 10 11 12
Data variables:
    sst      (month, lat, lon) float32 -1.8 -1.8 -1.8 -1.8 ... nan nan nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-c1498bc5-1ce8-4056-9976-b00c858162bf" class="xr-section-summary-in" type="checkbox" disabled><label for="section-c1498bc5-1ce8-4056-9976-b00c858162bf" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">month</span>: 12</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-2e54ad11-99fd-4e56-8cde-fe5166d45b15" class="xr-section-summary-in" type="checkbox" checked><label for="section-2e54ad11-99fd-4e56-8cde-fe5166d45b15" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-874b18ad-a9ae-4deb-ab6a-d6303c9ae28f" class="xr-var-attrs-in" type="checkbox"><label for="attrs-874b18ad-a9ae-4deb-ab6a-d6303c9ae28f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-1dc3a24f-c55b-43ca-9026-ee2ed8f9e77c" class="xr-var-data-in" type="checkbox"><label for="data-1dc3a24f-c55b-43ca-9026-ee2ed8f9e77c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-6c5c4ee3-079d-43f8-afa0-bc018d58b70c" class="xr-var-attrs-in" type="checkbox"><label for="attrs-6c5c4ee3-079d-43f8-afa0-bc018d58b70c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-bbeb8e85-112b-4113-8b65-d8b56978b477" class="xr-var-data-in" type="checkbox"><label for="data-bbeb8e85-112b-4113-8b65-d8b56978b477" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">month</span></div><div class="xr-var-dims">(month)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 2 3 4 5 6 7 8 9 10 11 12</div><input id="attrs-4453ce77-4df2-43d9-82cc-975182e9388f" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-4453ce77-4df2-43d9-82cc-975182e9388f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-14f60d52-42bf-4d0b-8798-eb2912eb256f" class="xr-var-data-in" type="checkbox"><label for="data-14f60d52-42bf-4d0b-8798-eb2912eb256f" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-2a83a053-0e31-4c6b-9be5-e8b78504c474" class="xr-section-summary-in" type="checkbox" checked><label for="section-2a83a053-0e31-4c6b-9be5-e8b78504c474" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(month, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-1.8 -1.8 -1.8 -1.8 ... nan nan nan</div><input id="attrs-02cca06b-7598-45b2-9e65-994f87578b47" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-02cca06b-7598-45b2-9e65-994f87578b47" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-beb51188-0df6-4684-bac5-6b324779e33d" class="xr-var-data-in" type="checkbox"><label for="data-beb51188-0df6-4684-bac5-6b324779e33d" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        ...,
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]],<br>
       [[-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
...
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]],<br>
       [[-1.7994629, -1.7995554, -1.7998236, ..., -1.7997916,
         -1.7996355, -1.7994715],
        [-1.7995405, -1.7997376, -1.8000009, ..., -1.8000009,
         -1.7998223, -1.7995865],
        [-1.8000009, -1.8000009, -1.8000009, ..., -1.8000009,
         -1.8000009, -1.8000009],
        ...,
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan],
        [       nan,        nan,        nan, ...,        nan,
                nan,        nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-863d864f-d562-49c6-bf75-254235560488" class="xr-section-summary-in" type="checkbox" disabled><label for="section-863d864f-d562-49c6-bf75-254235560488" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>对于分组方案中的每一个分组都作用.mean降维方法，然后通过自动组合的方式得到最后的统一的数据集monthsst。<br>这个数据集可以通过month索引多年各个月份的数据。</p><p>接下来试着做一下数据的累计操作，并绘图。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 北大西洋特定格点的多年月平均气候序列</span></span><br><span class="line">gb.mean(dim=<span class="string">"time"</span>).sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb2300d97c0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_128_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多年纬度月平均气候场</span></span><br><span class="line">gb.mean(dim=<span class="string">"time"</span>).sst.mean(dim=<span class="string">"lon"</span>).plot.contourf(x=<span class="string">"month"</span>, levels=<span class="number">12</span>, vmin=-<span class="number">2</span>, vmax=<span class="number">30</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.contour.QuadContourSet at 0x7fb2302a0d30&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_129_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 多年1月与7月平均气候场之间的差异</span></span><br><span class="line">(gb.mean(dim=<span class="string">"time"</span>).sst.sel(month=<span class="number">1</span>) - gb.mean(dim=<span class="string">"time"</span>).sst.sel(month=<span class="number">7</span>)).plot.contourf(vmax=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.contour.QuadContourSet at 0x7fb22ff9b1f0&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_130_1.png" alt="png"></p><h4 id="转换">转换</h4><p>下面需从数据集中删除气候平均，从而得到变量随气候平均态变化的残差。一般将这个残差称为距平。</p><p>对转换（Transformations）操作而言，消除数据的气候平均是一个很好的例子。<br>转换操作对分组的对象进行操作，但不改变原数据的维度尺寸。</p><p>xarray 通过使用Groupby 算法使这些类型的转换变得容易。下面给出了计算去除月份温度差异的海温月数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对 12 组中的对应组的海温数据（这个组内的每一天的海温数据）减去平均的海温数据</span></span><br><span class="line">remove_time_mean = <span class="keyword">lambda</span> a: a-a.mean(dim=<span class="string">"time"</span>)</span><br><span class="line">gb.<span class="built_in">map</span>(remove_time_mean)</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 708)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01
Data variables:
    sst      (time, lat, lon) float32 9.537e-07 9.537e-07 9.537e-07 ... nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-03eb0322-3018-41eb-9f22-45817535e3ae" class="xr-section-summary-in" type="checkbox" disabled><label for="section-03eb0322-3018-41eb-9f22-45817535e3ae" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 708</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-d4eebc21-cf1e-48d8-9c82-ba5f3d00edd6" class="xr-section-summary-in" type="checkbox" checked><label for="section-d4eebc21-cf1e-48d8-9c82-ba5f3d00edd6" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-22eba5d5-05de-43be-baf8-3170d18cb617" class="xr-var-attrs-in" type="checkbox"><label for="attrs-22eba5d5-05de-43be-baf8-3170d18cb617" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-f3afaa82-401b-45c2-b901-6c0b1546b5ad" class="xr-var-data-in" type="checkbox"><label for="data-f3afaa82-401b-45c2-b901-6c0b1546b5ad" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-29d94223-589b-45ca-b770-8b252a37a26d" class="xr-var-attrs-in" type="checkbox"><label for="attrs-29d94223-589b-45ca-b770-8b252a37a26d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-f32e17a5-94cb-4af8-98aa-4edc754223b2" class="xr-var-data-in" type="checkbox"><label for="data-f32e17a5-94cb-4af8-98aa-4edc754223b2" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-12-01</div><input id="attrs-594338c6-df6f-44d7-a14f-07363e5f5f86" class="xr-var-attrs-in" type="checkbox"><label for="attrs-594338c6-df6f-44d7-a14f-07363e5f5f86" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-138436c1-7521-4eb8-9776-ef8ddeb37d36" class="xr-var-data-in" type="checkbox"><label for="data-138436c1-7521-4eb8-9776-ef8ddeb37d36" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1960-02-01T00:00:00.000000000',
       '1960-03-01T00:00:00.000000000', ..., '2018-10-01T00:00:00.000000000',
       '2018-11-01T00:00:00.000000000', '2018-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-52cd1151-ac39-45f5-894f-f030cbc74bd4" class="xr-section-summary-in" type="checkbox" checked><label for="section-52cd1151-ac39-45f5-894f-f030cbc74bd4" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">9.537e-07 9.537e-07 ... nan nan</div><input id="attrs-229c4c80-aa35-460a-a16f-2c12c71b158b" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-229c4c80-aa35-460a-a16f-2c12c71b158b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-794cbb33-5987-48b7-aaf2-a8191bcb9d54" class="xr-var-data-in" type="checkbox"><label for="data-794cbb33-5987-48b7-aaf2-a8191bcb9d54" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        ...,
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]],<br>
       [[ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
...
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]],<br>
       [[-5.3703785e-04, -4.4453144e-04, -1.7631054e-04, ...,
         -2.0837784e-04, -3.6442280e-04, -5.2845478e-04],
        [-4.5943260e-04, -2.6237965e-04,  9.5367432e-07, ...,
          9.5367432e-07, -1.7762184e-04, -4.1341782e-04],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        ...,
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-3063c95a-54ee-4534-95f6-b126ebfbdcf9" class="xr-section-summary-in" type="checkbox" disabled><label for="section-3063c95a-54ee-4534-95f6-b126ebfbdcf9" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>也可以简写为下面这种形式</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对 12 组中的对应组的海温数据（这个组内的每一天的海温数据）减去平均的海温数据</span></span><br><span class="line">ds_anom = gb - gb.mean(dim=<span class="string">"time"</span>)</span><br><span class="line">ds_anom</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 708)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01
    month    (time) int64 1 2 3 4 5 6 7 8 9 10 11 ... 2 3 4 5 6 7 8 9 10 11 12
Data variables:
    sst      (time, lat, lon) float32 9.537e-07 9.537e-07 9.537e-07 ... nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-2becef3c-aac0-4fbe-9ca1-2d102bd7359f" class="xr-section-summary-in" type="checkbox" disabled><label for="section-2becef3c-aac0-4fbe-9ca1-2d102bd7359f" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 708</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-82a58bfb-d4dc-4771-bb06-7ccd166bf6ee" class="xr-section-summary-in" type="checkbox" checked><label for="section-82a58bfb-d4dc-4771-bb06-7ccd166bf6ee" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-0a907d34-59ce-454d-b31c-7e2ab0659586" class="xr-var-attrs-in" type="checkbox"><label for="attrs-0a907d34-59ce-454d-b31c-7e2ab0659586" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-ac47e499-3a42-49da-8685-fc0789dd4884" class="xr-var-data-in" type="checkbox"><label for="data-ac47e499-3a42-49da-8685-fc0789dd4884" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-13a4e5c8-994b-459c-832a-eca9aee1f06a" class="xr-var-attrs-in" type="checkbox"><label for="attrs-13a4e5c8-994b-459c-832a-eca9aee1f06a" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-2ffac9d1-0c8b-4e43-b720-216cca19be7c" class="xr-var-data-in" type="checkbox"><label for="data-2ffac9d1-0c8b-4e43-b720-216cca19be7c" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-12-01</div><input id="attrs-e2bff2a5-0a32-441f-a0ed-6ef934877a2f" class="xr-var-attrs-in" type="checkbox"><label for="attrs-e2bff2a5-0a32-441f-a0ed-6ef934877a2f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-2f584a6e-4044-4d33-832d-6931c76a3a60" class="xr-var-data-in" type="checkbox"><label for="data-2f584a6e-4044-4d33-832d-6931c76a3a60" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1960-02-01T00:00:00.000000000',
       '1960-03-01T00:00:00.000000000', ..., '2018-10-01T00:00:00.000000000',
       '2018-11-01T00:00:00.000000000', '2018-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>month</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 2 3 4 5 6 7 ... 6 7 8 9 10 11 12</div><input id="attrs-7b06a9da-2c38-49bb-98de-9fdda98c1f01" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-7b06a9da-2c38-49bb-98de-9fdda98c1f01" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-0c891268-870a-4d39-b453-76594f9e1852" class="xr-var-data-in" type="checkbox"><label for="data-0c891268-870a-4d39-b453-76594f9e1852" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
        5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9,
       10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
...
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
        5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9,
       10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-89ee5f19-b4bb-4479-958d-ecf8feb427dc" class="xr-section-summary-in" type="checkbox" checked><label for="section-89ee5f19-b4bb-4479-958d-ecf8feb427dc" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">9.537e-07 9.537e-07 ... nan nan</div><input id="attrs-177357c5-5993-40d8-911f-53e06cded516" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-177357c5-5993-40d8-911f-53e06cded516" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-dba44ce9-1c01-431d-b2bb-28e9b0c01b8b" class="xr-var-data-in" type="checkbox"><label for="data-dba44ce9-1c01-431d-b2bb-28e9b0c01b8b" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        ...,
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]],<br>
       [[ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
...
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]],<br>
       [[-5.3703785e-04, -4.4453144e-04, -1.7631054e-04, ...,
         -2.0837784e-04, -3.6442280e-04, -5.2845478e-04],
        [-4.5943260e-04, -2.6237965e-04,  9.5367432e-07, ...,
          9.5367432e-07, -1.7762184e-04, -4.1341782e-04],
        [ 9.5367432e-07,  9.5367432e-07,  9.5367432e-07, ...,
          9.5367432e-07,  9.5367432e-07,  9.5367432e-07],
        ...,
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan],
        [           nan,            nan,            nan, ...,
                    nan,            nan,            nan]]], dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-e0deccd7-e30a-4c14-92e7-110cac0ccf3e" class="xr-section-summary-in" type="checkbox" disabled><label for="section-e0deccd7-e30a-4c14-92e7-110cac0ccf3e" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>当经过上述去除季节性周期的影响后，便很容易发现气候变率的信号。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 北大西洋单点的时间序列</span></span><br><span class="line">ds_anom.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb22fee9f70&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_137_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 2018 年 1 月 1 日与 1960 年 1 月 1 日之间 SST 之间的差异</span></span><br><span class="line">(ds_anom.sel(time=<span class="string">"2018-01-01"</span>) - ds_anom.sel(time=<span class="string">"1960-01-01"</span>)).sst.plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb22f67b280&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_138_1.png" alt="png"></p><h2 id="resample重采样">Resample重采样</h2><p>xarray 中的Resample（重采样）的处理方法与 Pandas 包几乎相同。就本质而言，Resample 也是一个分割数据的操作。<br>它与分割操作的基本语法类似。应当注意，对于 Resample 操作而言，其作用对象必须是时间维度。</p><p><strong><em>ds.resample( time="freq" )</em></strong></p><p>为说明 Resample 的用法，下面给出一个例子计算逐五年的平均值曲线。</p><p>对于 Resample 操作而言，与 Groupby 操作非常类似，首先也创建了一个DatasetResample对象。<br>.resample(time="5Y")是对时间进行重采样进行设置，维度为time，设置的时间间隔为 5 年。<br>应当指出这里的时间间隔写法与之前pd.date_range函数中的freq的时间间隔的关键词是一致的。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">resample_obj = ds_anom.resample(time=<span class="string">"5Y"</span>)</span><br><span class="line">resample_obj</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">DatasetResample, grouped over '__resample_dim__'</span><br><span class="line">13 groups with labels 1960-12-31, ..., 2020-12-31.</span><br></pre></td></tr></table></figure><p>然后对这些分割好的 Resample 对象进行取平均，以便获得每一个分组好的 Resample 对象中的平均值。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ds_anom_resample = resample_obj.mean(dim=<span class="string">"time"</span>)</span><br><span class="line">ds_anom_resample</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (time: 13, lat: 89, lon: 180)
Coordinates:

* time     (time) datetime64[ns] 1960-12-31 1965-12-31 ... 2020-12-31
* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
Data variables:
    sst      (time, lat, lon) float32 -0.0006173 -0.0006063 ... nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-376ff188-f977-46bd-8ef6-57700e1ba261" class="xr-section-summary-in" type="checkbox" disabled><label for="section-376ff188-f977-46bd-8ef6-57700e1ba261" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 13</li><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-390e8bfc-4d90-4520-97f9-18b8f4623643" class="xr-section-summary-in" type="checkbox" checked><label for="section-390e8bfc-4d90-4520-97f9-18b8f4623643" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-12-31 ... 2020-12-31</div><input id="attrs-081b3a19-2bdb-4d40-8851-005a18164474" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-081b3a19-2bdb-4d40-8851-005a18164474" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-2af6b8e2-fa2a-4598-baca-3d51cf512425" class="xr-var-data-in" type="checkbox"><label for="data-2af6b8e2-fa2a-4598-baca-3d51cf512425" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1960-12-31T00:00:00.000000000', '1965-12-31T00:00:00.000000000',
       '1970-12-31T00:00:00.000000000', '1975-12-31T00:00:00.000000000',
       '1980-12-31T00:00:00.000000000', '1985-12-31T00:00:00.000000000',
       '1990-12-31T00:00:00.000000000', '1995-12-31T00:00:00.000000000',
       '2000-12-31T00:00:00.000000000', '2005-12-31T00:00:00.000000000',
       '2010-12-31T00:00:00.000000000', '2015-12-31T00:00:00.000000000',
       '2020-12-31T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-a8b0b94e-80b8-411c-b85d-9ee5cb75e7fc" class="xr-var-attrs-in" type="checkbox"><label for="attrs-a8b0b94e-80b8-411c-b85d-9ee5cb75e7fc" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-81c81077-4d16-4acd-939a-50be93ebfd73" class="xr-var-data-in" type="checkbox"><label for="data-81c81077-4d16-4acd-939a-50be93ebfd73" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-b57a4ffe-6eab-419f-afba-570ac2b8bd7d" class="xr-var-attrs-in" type="checkbox"><label for="attrs-b57a4ffe-6eab-419f-afba-570ac2b8bd7d" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-63d42492-264e-48de-bf3b-48f8f483d21e" class="xr-var-data-in" type="checkbox"><label for="data-63d42492-264e-48de-bf3b-48f8f483d21e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-7c8d84aa-9c2e-4735-9f00-f6e84195639d" class="xr-section-summary-in" type="checkbox" checked><label for="section-7c8d84aa-9c2e-4735-9f00-f6e84195639d" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">-0.0006173 -0.0006063 ... nan nan</div><input id="attrs-273b303d-755c-4303-a916-3e8856ca2f50" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-273b303d-755c-4303-a916-3e8856ca2f50" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-f7798778-1e36-4f4a-b624-f77c3edf203e" class="xr-var-data-in" type="checkbox"><label for="data-f7798778-1e36-4f4a-b624-f77c3edf203e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[-6.17325306e-04, -6.06258691e-04, -5.98321378e-04, ...,
         -4.32660192e-04, -5.44697046e-04, -6.22689724e-04],
        [-5.74946404e-04, -6.54459000e-04, -7.07745552e-04, ...,
         -1.42673656e-04, -3.51329654e-04, -4.69972700e-04],
        [-1.50303049e-05, -1.81456402e-04, -2.83827394e-04, ...,
         -1.36802599e-04, -8.82744789e-05, -3.82562466e-05],
        ...,
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan]],<br>
       [[-6.17325306e-04, -6.06258691e-04, -5.98321378e-04, ...,
         -4.32660192e-04, -5.44697046e-04, -6.22689724e-04],
        [-5.74946404e-04, -6.54459000e-04, -7.07745552e-04, ...,
         -1.42673656e-04, -3.51329654e-04, -4.69972700e-04],
        [-1.50303049e-05, -1.81456402e-04, -2.83827394e-04, ...,
         -1.36802599e-04, -8.82744789e-05, -3.82562466e-05],
...
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan]],<br>
       [[ 1.15415119e-02,  1.13348728e-02,  1.11866789e-02, ...,
          8.09442345e-03,  1.01860035e-02,  1.16419662e-02],
        [ 1.07506113e-02,  1.22348862e-02,  1.32297408e-02, ...,
          2.68187118e-03,  6.57645194e-03,  8.79117195e-03],
        [ 2.99115985e-04,  3.40577960e-03,  5.31672454e-03, ...,
          2.54808855e-03,  1.66638358e-03,  7.32551038e-04],
        ...,
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan]]],
      dtype=float32)</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-2d67ccca-229c-4c6b-a3e0-714d4d15ef73" class="xr-section-summary-in" type="checkbox" disabled><label for="section-2d67ccca-229c-4c6b-a3e0-714d4d15ef73" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>为了说明进行重采样后的效果，下面来看一下(50°N, 60°E)的海温变化情况</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原始海温变化的时间序列</span></span><br><span class="line">ds_anom.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot() </span><br><span class="line"><span class="comment"># 逐5年平均的海温变化的时间序列</span></span><br><span class="line">ds_anom_resample.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(marker=<span class="string">"o"</span>) </span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb22f57cdf0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_146_1.png" alt="png"></p><h2 id="coarsen粗化">Coarsen（粗化）</h2><p>coarsen（粗化）所做的事情与resample（重采样）类似。<br>resample仅可用于时间坐标，但coarsen对逻辑坐标和时间坐标均可使用。<br>同时coarsen不仅能作用一个维度，还可作用多个维度。粗化方法通常用来降低xarray对象的分辨率。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds_anom.sst.isel(time = <span class="number">0</span>).coords</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Coordinates:</span><br><span class="line">  * lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0</span><br><span class="line">  * lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0</span><br><span class="line">    time     datetime64[ns] 1960-01-01</span><br><span class="line">    month    int64 1</span><br></pre></td></tr></table></figure><p>采用粗化的方法将其重采样至 5×10 的分辨率</p><p><strong><em>ds.coarsen( dim1=size1, dim2=size2, ..., boundary )</em></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ds_anom.sst.coarsen(</span><br><span class="line">    lat=<span class="number">5</span>, </span><br><span class="line">    lon=<span class="number">10</span>, </span><br><span class="line">    boundary=<span class="string">"trim"</span></span><br><span class="line">).mean().isel(time=<span class="number">0</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb22f5554f0&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_152_1.png" alt="png"></p><p>boundary 变量规定了如何处理数组尺寸与窗口尺寸之间不是倍数的情况。<br>若为trim，多余的不能整除的数据将被直接剔除；若为pad，则将其填充为 nan.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ds_anom.sst.coarsen(</span><br><span class="line">    lat=<span class="number">5</span>, </span><br><span class="line">    lon=<span class="number">10</span>, </span><br><span class="line">    boundary=<span class="string">"pad"</span></span><br><span class="line">).mean().isel(time=<span class="number">0</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb22f495cd0&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_154_1.png" alt="png"></p><p>对时间维的重采样，resample和coarsen均可有类似的结果。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ds_anom_ = ds_anom.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>)</span><br><span class="line">ds_anom_.coarsen (time=<span class="number">12</span>, boundary= <span class="string">"pad"</span>).mean().plot(c=<span class="string">"r"</span>)</span><br><span class="line">ds_anom_.resample(time=<span class="string">"Y"</span>).mean().plot(c=<span class="string">"b"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb22f3775b0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_156_1.png" alt="png"></p><p>最后对比一下逐12个日期平均和12个月滑动平均的曲线</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 5年平均序列 coarsen</span></span><br><span class="line">ds_anom_coarsen_time = ds_anom.coarsen(time=<span class="number">12</span>*<span class="number">5</span>, boundary=<span class="string">"pad"</span>).mean()</span><br><span class="line">ds_anom_coarsen_time.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(c=<span class="string">"r"</span>)</span><br><span class="line"><span class="comment"># 5年平均序列 resample</span></span><br><span class="line">ds_anom_coarsen_time = ds_anom.resample(time=<span class="string">"5Y"</span>, closed=<span class="string">"left"</span>).mean()</span><br><span class="line">ds_anom_coarsen_time.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(c=<span class="string">"b"</span>)</span><br><span class="line"><span class="comment"># 5年滑动平均</span></span><br><span class="line">ds_anom_rolling = ds_anom.rolling(time=<span class="number">12</span>*<span class="number">5</span>).mean()</span><br><span class="line">ds_anom_rolling.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(c=<span class="string">"k"</span>)</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb22f303370&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_158_1.png" alt="png"></p><h2 id="rolling-滑动平均">Rolling 滑动平均</h2><p>Rolling 方法也与pandas 包中的类似，但是稍有不同的是，它可适用于任意维度。如果将其作用于时间维度，也可称之为滑动平均。</p><p><strong><em>ds.rolling( dim, center )</em></strong></p><p>time=12指定了对维度time以 12 个月为周期（月数据）变动时间窗，<br>center=True表明以当前窗的两侧筛选数据，否则是以当前窗的前 12 个月作为筛选目标（包括本身）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ds_anom_rolling = ds_anom.rolling(time=<span class="number">12</span>*<span class="number">5</span>, center=<span class="literal">True</span>).mean()</span><br><span class="line">ds_anom_rolling</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:  (lat: 89, lon: 180, time: 708)
Coordinates:

* lat      (lat) float32 88.0 86.0 84.0 82.0 80.0 ... -82.0 -84.0 -86.0 -88.0
* lon      (lon) float32 0.0 2.0 4.0 6.0 8.0 ... 350.0 352.0 354.0 356.0 358.0
* time     (time) datetime64[ns] 1960-01-01 1960-02-01 ... 2018-12-01
    month    (time) int64 1 2 3 4 5 6 7 8 9 10 11 ... 2 3 4 5 6 7 8 9 10 11 12
Data variables:
    sst      (time, lat, lon) float64 nan nan nan nan nan ... nan nan nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-e27aa300-3f5c-45ed-87be-b0c7315c6cad" class="xr-section-summary-in" type="checkbox" disabled><label for="section-e27aa300-3f5c-45ed-87be-b0c7315c6cad" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li><li><span class="xr-has-index">time</span>: 708</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-5413e31b-cf33-4948-ade4-5725c19942c4" class="xr-section-summary-in" type="checkbox" checked><label for="section-5413e31b-cf33-4948-ade4-5725c19942c4" class="xr-section-summary">Coordinates: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-e590d88f-80d1-49db-88bf-8d4d435fae3f" class="xr-var-attrs-in" type="checkbox"><label for="attrs-e590d88f-80d1-49db-88bf-8d4d435fae3f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-37ad7079-3669-422a-a0ec-02b516ba6020" class="xr-var-data-in" type="checkbox"><label for="data-37ad7079-3669-422a-a0ec-02b516ba6020" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_north</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>actual_range :</span></dt><dd>[ 88. -88.]</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>axis :</span></dt><dd>Y</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.], dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float32</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-6ba1c3fc-9f8e-406e-b251-204e93efc38f" class="xr-var-attrs-in" type="checkbox"><label for="attrs-6ba1c3fc-9f8e-406e-b251-204e93efc38f" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-96639e77-3709-4d19-875f-b04cb808b243" class="xr-var-data-in" type="checkbox"><label for="data-96639e77-3709-4d19-875f-b04cb808b243" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>units :</span></dt><dd>degrees_east</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>actual_range :</span></dt><dd>[ 0. 358.]</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>axis :</span></dt><dd>X</dd><dt><span>coordinate_defines :</span></dt><dd>center</dd></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.],
      dtype=float32)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1960-01-01 ... 2018-12-01</div><input id="attrs-5a320bf3-9ef4-41d9-8b62-2d3cd91919a9" class="xr-var-attrs-in" type="checkbox"><label for="attrs-5a320bf3-9ef4-41d9-8b62-2d3cd91919a9" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-68237430-769c-433c-9618-0c83d316a2db" class="xr-var-data-in" type="checkbox"><label for="data-68237430-769c-433c-9618-0c83d316a2db" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"><dt><span>long_name :</span></dt><dd>Time</dd><dt><span>delta_t :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>avg_period :</span></dt><dd>0000-01-00 00:00:00</dd><dt><span>prev_avg_period :</span></dt><dd>0000-00-07 00:00:00</dd><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>axis :</span></dt><dd>T</dd><dt><span>actual_range :</span></dt><dd>[19723. 80658.]</dd></dl></div><div class="xr-var-data"><pre>array(['1960-01-01T00:00:00.000000000', '1960-02-01T00:00:00.000000000',
       '1960-03-01T00:00:00.000000000', ..., '2018-10-01T00:00:00.000000000',
       '2018-11-01T00:00:00.000000000', '2018-12-01T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>month</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 2 3 4 5 6 7 ... 6 7 8 9 10 11 12</div><input id="attrs-84051954-4b04-458a-8473-68ec1728ac47" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-84051954-4b04-458a-8473-68ec1728ac47" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-5a4cbf6c-449a-42eb-9400-5b9a5baa2bcc" class="xr-var-data-in" type="checkbox"><label for="data-5a4cbf6c-449a-42eb-9400-5b9a5baa2bcc" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
        5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9,
       10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
...
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,
        7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11,
       12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,
        5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9,
       10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,
        3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,
        8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,
        1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,
        6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10,
       11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,
        4,  5,  6,  7,  8,  9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,
        9, 10, 11, 12,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,  1,
        2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-82e8f8fb-0653-4a37-9ea9-d8a7109f24b3" class="xr-section-summary-in" type="checkbox" checked><label for="section-82e8f8fb-0653-4a37-9ea9-d8a7109f24b3" class="xr-section-summary">Data variables: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>sst</span></div><div class="xr-var-dims">(time, lat, lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">nan nan nan nan ... nan nan nan nan</div><input id="attrs-9da3cb60-cee1-465b-804a-68503fa91440" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-9da3cb60-cee1-465b-804a-68503fa91440" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-3adf92c2-3841-40a3-a98f-1be747a9dfd8" class="xr-var-data-in" type="checkbox"><label for="data-3adf92c2-3841-40a3-a98f-1be747a9dfd8" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],<br>
       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],<br>
       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
...
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],<br>
       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]],<br>
       [[nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        ...,
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan],
        [nan, nan, nan, ..., nan, nan, nan]]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-cdd99fdd-dd39-4742-a007-4c37086cf216" class="xr-section-summary-in" type="checkbox" disabled><label for="section-cdd99fdd-dd39-4742-a007-4c37086cf216" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 原始海温变化的时间序列</span></span><br><span class="line">ds_anom.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(color=<span class="string">"#CCCCCC"</span>) </span><br><span class="line"><span class="comment"># 5年滑动平均的海温变化的时间序列</span></span><br><span class="line">ds_anom_rolling.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(color=<span class="string">"#E54E35"</span>, linewidth=<span class="number">3</span>) </span><br><span class="line"><span class="comment"># 逐5年平均的海温变化的时间序列</span></span><br><span class="line">ds_anom_resample.sst.sel(lon=<span class="number">300</span>, lat=<span class="number">50</span>).plot(color=<span class="string">"#3FAA59"</span>, marker=<span class="string">"o"</span>, linewidth=<span class="number">3</span>) </span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&lt;matplotlib.lines.Line2D at 0x7fb22f2eb4f0&gt;]</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_164_1.png" alt="png"></p><h3 id="为了更好的说明-rolling-的作用下面举一个简单的例子说明其功能">为了更好的说明 Rolling 的作用，下面举一个简单的例子说明其功能</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">da = xr.DataArray(</span><br><span class="line">    np.linspace(<span class="number">0</span>, <span class="number">11</span>, <span class="number">12</span>),</span><br><span class="line">    dims=<span class="string">"time"</span>,</span><br><span class="line">    coords=[</span><br><span class="line">        pd.date_range(<span class="string">"1999-12-15"</span>,periods=<span class="number">12</span>,freq=pd.DateOffset(months=<span class="number">1</span>))</span><br><span class="line">    ]</span><br><span class="line">)</span><br><span class="line">da</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (time: 12)&gt;
array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10., 11.])
Coordinates:

* time     (time) datetime64[ns] 1999-12-15 2000-01-15 ... 2000-11-15</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 12</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-283441ba-46d2-4b38-99f6-6770d7ce4e04" class="xr-array-in" type="checkbox" checked><label for="section-283441ba-46d2-4b38-99f6-6770d7ce4e04" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>0.0 1.0 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0 10.0 11.0</span></div><div class="xr-array-data"><pre>array([ 0.,  1.,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., 10., 11.])</pre></div></div></li><li class="xr-section-item"><input id="section-0d4b3da1-8fac-4c59-9a52-b94b1fa9122a" class="xr-section-summary-in" type="checkbox" checked><label for="section-0d4b3da1-8fac-4c59-9a52-b94b1fa9122a" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1999-12-15 ... 2000-11-15</div><input id="attrs-6ff9bc6a-f030-4da1-a8a5-c09797071e3e" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-6ff9bc6a-f030-4da1-a8a5-c09797071e3e" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-247edae8-c9d7-4722-a8ad-eb31a618805e" class="xr-var-data-in" type="checkbox"><label for="data-247edae8-c9d7-4722-a8ad-eb31a618805e" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1999-12-15T00:00:00.000000000', '2000-01-15T00:00:00.000000000',
       '2000-02-15T00:00:00.000000000', '2000-03-15T00:00:00.000000000',
       '2000-04-15T00:00:00.000000000', '2000-05-15T00:00:00.000000000',
       '2000-06-15T00:00:00.000000000', '2000-07-15T00:00:00.000000000',
       '2000-08-15T00:00:00.000000000', '2000-09-15T00:00:00.000000000',
       '2000-10-15T00:00:00.000000000', '2000-11-15T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-02781e7b-c67a-45a1-b467-5ea18aebf0c8" class="xr-section-summary-in" type="checkbox" disabled><label for="section-02781e7b-c67a-45a1-b467-5ea18aebf0c8" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">da.rolling(time=<span class="number">5</span>, center=<span class="literal">True</span>).mean()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (time: 12)&gt;
array([nan, nan,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., nan, nan])
Coordinates:

* time     (time) datetime64[ns] 1999-12-15 2000-01-15 ... 2000-11-15</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 12</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-11716c11-9adf-4ea0-8d6e-40f296e56902" class="xr-array-in" type="checkbox" checked><label for="section-11716c11-9adf-4ea0-8d6e-40f296e56902" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>nan nan 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0 nan nan</span></div><div class="xr-array-data"><pre>array([nan, nan,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9., nan, nan])</pre></div></div></li><li class="xr-section-item"><input id="section-eb4215f7-0f36-474a-9d18-a739081bf850" class="xr-section-summary-in" type="checkbox" checked><label for="section-eb4215f7-0f36-474a-9d18-a739081bf850" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1999-12-15 ... 2000-11-15</div><input id="attrs-75f7d4c1-906e-40b6-bbcd-8e28325a9ad5" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-75f7d4c1-906e-40b6-bbcd-8e28325a9ad5" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-cc134ea0-0beb-4569-9a99-5f0f185cdaee" class="xr-var-data-in" type="checkbox"><label for="data-cc134ea0-0beb-4569-9a99-5f0f185cdaee" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1999-12-15T00:00:00.000000000', '2000-01-15T00:00:00.000000000',
       '2000-02-15T00:00:00.000000000', '2000-03-15T00:00:00.000000000',
       '2000-04-15T00:00:00.000000000', '2000-05-15T00:00:00.000000000',
       '2000-06-15T00:00:00.000000000', '2000-07-15T00:00:00.000000000',
       '2000-08-15T00:00:00.000000000', '2000-09-15T00:00:00.000000000',
       '2000-10-15T00:00:00.000000000', '2000-11-15T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-54dbcfae-e357-47a4-8f29-eabaca38f288" class="xr-section-summary-in" type="checkbox" disabled><label for="section-54dbcfae-e357-47a4-8f29-eabaca38f288" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>若时间窗为偶数值，那么对应中心位置将会在平均位置偏右侧</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">da.rolling(time=<span class="number">4</span>, center=<span class="literal">True</span>).mean()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (time: 12)&gt;
array([nan, nan, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, nan])
Coordinates:

* time     (time) datetime64[ns] 1999-12-15 2000-01-15 ... 2000-11-15</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 12</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-74c7a787-c121-41bd-b6c8-4782663073a2" class="xr-array-in" type="checkbox" checked><label for="section-74c7a787-c121-41bd-b6c8-4782663073a2" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>nan nan 1.5 2.5 3.5 4.5 5.5 6.5 7.5 8.5 9.5 nan</span></div><div class="xr-array-data"><pre>array([nan, nan, 1.5, 2.5, 3.5, 4.5, 5.5, 6.5, 7.5, 8.5, 9.5, nan])</pre></div></div></li><li class="xr-section-item"><input id="section-566c6767-fd25-49c8-af85-e90b53edae11" class="xr-section-summary-in" type="checkbox" checked><label for="section-566c6767-fd25-49c8-af85-e90b53edae11" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1999-12-15 ... 2000-11-15</div><input id="attrs-8ef61637-2d27-4d48-ad07-e973fedc589c" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-8ef61637-2d27-4d48-ad07-e973fedc589c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-8218984c-b8e3-4bc2-9130-92b169861218" class="xr-var-data-in" type="checkbox"><label for="data-8218984c-b8e3-4bc2-9130-92b169861218" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1999-12-15T00:00:00.000000000', '2000-01-15T00:00:00.000000000',
       '2000-02-15T00:00:00.000000000', '2000-03-15T00:00:00.000000000',
       '2000-04-15T00:00:00.000000000', '2000-05-15T00:00:00.000000000',
       '2000-06-15T00:00:00.000000000', '2000-07-15T00:00:00.000000000',
       '2000-08-15T00:00:00.000000000', '2000-09-15T00:00:00.000000000',
       '2000-10-15T00:00:00.000000000', '2000-11-15T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-0b36f7c1-bad1-44fa-b557-946224f6eb1e" class="xr-section-summary-in" type="checkbox" disabled><label for="section-0b36f7c1-bad1-44fa-b557-946224f6eb1e" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>若不指定参数center=True，则采用从当前元素往前筛选的方法</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">da.rolling(time=<span class="number">5</span>).mean()</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (time: 12)&gt;
array([nan, nan, nan, nan,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])
Coordinates:

* time     (time) datetime64[ns] 1999-12-15 2000-01-15 ... 2000-11-15</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 12</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-3736ec75-b047-496d-88e2-e9e8cdce9ab6" class="xr-array-in" type="checkbox" checked><label for="section-3736ec75-b047-496d-88e2-e9e8cdce9ab6" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>nan nan nan nan 2.0 3.0 4.0 5.0 6.0 7.0 8.0 9.0</span></div><div class="xr-array-data"><pre>array([nan, nan, nan, nan,  2.,  3.,  4.,  5.,  6.,  7.,  8.,  9.])</pre></div></div></li><li class="xr-section-item"><input id="section-1442818b-8601-486f-bee4-7c0a1b9b60be" class="xr-section-summary-in" type="checkbox" checked><label for="section-1442818b-8601-486f-bee4-7c0a1b9b60be" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1999-12-15 ... 2000-11-15</div><input id="attrs-d8a0d1b3-2389-4e4f-a3fc-bda241d78d63" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-d8a0d1b3-2389-4e4f-a3fc-bda241d78d63" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-aefbc9de-20e8-4655-8e4e-036d3f4a0ac5" class="xr-var-data-in" type="checkbox"><label for="data-aefbc9de-20e8-4655-8e4e-036d3f4a0ac5" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1999-12-15T00:00:00.000000000', '2000-01-15T00:00:00.000000000',
       '2000-02-15T00:00:00.000000000', '2000-03-15T00:00:00.000000000',
       '2000-04-15T00:00:00.000000000', '2000-05-15T00:00:00.000000000',
       '2000-06-15T00:00:00.000000000', '2000-07-15T00:00:00.000000000',
       '2000-08-15T00:00:00.000000000', '2000-09-15T00:00:00.000000000',
       '2000-10-15T00:00:00.000000000', '2000-11-15T00:00:00.000000000'],
      dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a484d9c7-8f54-481f-89b7-f8bc1ad54654" class="xr-section-summary-in" type="checkbox" disabled><label for="section-a484d9c7-8f54-481f-89b7-f8bc1ad54654" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>当然和 grouby 对象类似，也可用 list 来访问每一个滑动窗</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rolling_obj = da.rolling(time=<span class="number">5</span>)</span><br><span class="line"><span class="built_in">list</span>(rolling_obj)[<span class="number">4</span>][<span class="number">1</span>]</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.DataArray (time: 5)&gt;
array([0., 1., 2., 3., 4.])
Coordinates:

* time     (time) datetime64[ns] 1999-12-15 2000-01-15 ... 2000-04-15</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.DataArray</div><div class="xr-array-name"></div><ul class="xr-dim-list"><li><span class="xr-has-index">time</span>: 5</li></ul></div><ul class="xr-sections"><li class="xr-section-item"><div class="xr-array-wrap"><input id="section-30ab2264-bcc8-47ca-aa53-394f272b0d4f" class="xr-array-in" type="checkbox" checked><label for="section-30ab2264-bcc8-47ca-aa53-394f272b0d4f" title="Show/hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-array-preview xr-preview"><span>0.0 1.0 2.0 3.0 4.0</span></div><div class="xr-array-data"><pre>array([0., 1., 2., 3., 4.])</pre></div></div></li><li class="xr-section-item"><input id="section-6b9024e7-df2e-4e5b-8529-b055c737987a" class="xr-section-summary-in" type="checkbox" checked><label for="section-6b9024e7-df2e-4e5b-8529-b055c737987a" class="xr-section-summary">Coordinates: <span>(1)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">time</span></div><div class="xr-var-dims">(time)</div><div class="xr-var-dtype">datetime64[ns]</div><div class="xr-var-preview xr-preview">1999-12-15 ... 2000-04-15</div><input id="attrs-04dc8c86-dd98-4dd2-b2f1-dcf5e45efe59" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-04dc8c86-dd98-4dd2-b2f1-dcf5e45efe59" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-53268e2f-acc4-4655-8494-bc5161afc972" class="xr-var-data-in" type="checkbox"><label for="data-53268e2f-acc4-4655-8494-bc5161afc972" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(['1999-12-15T00:00:00.000000000', '2000-01-15T00:00:00.000000000',
       '2000-02-15T00:00:00.000000000', '2000-03-15T00:00:00.000000000',
       '2000-04-15T00:00:00.000000000'], dtype='datetime64[ns]')</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-6510e749-a116-488d-9ac9-45ce40808d8d" class="xr-section-summary-in" type="checkbox" disabled><label for="section-6510e749-a116-488d-9ac9-45ce40808d8d" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><h2 id="线性多项式回归">线性多项式回归</h2><p>.polyfit方法实现了回归功能，<br>第一个参数"time"指定拟合坐标为time，<br>第二数字参数指定为一元线性回归，<br>full = True代表回归方法不仅要返回拟合系数（一元回归即斜率和截距）还应当返回残差，矩阵秩和奇异值。</p><p><strong><em>ds.polyfit( dim, degree, full )</em></strong></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ds_poly = ds_anom.sst.polyfit(<span class="string">"time"</span>, <span class="number">1</span>, full=<span class="literal">True</span>)</span><br><span class="line">ds_poly</span><br></pre></td></tr></table></figure><div><svg style="position:absolute;width:0;height:0;overflow:hidden"><defs><br/><symbol id="icon-database" viewbox="0 0 32 32"><br/><path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"/><br/><path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/><path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"/><br/></symbol><br/><symbol id="icon-file-text2" viewbox="0 0 32 32"><br/><path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"/><br/><path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/><path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"/><br/></symbol><br/></defs></svg><style>:root{--xr-font-color0:var(--jp-content-font-color0, rgba(0, 0, 0, 1));--xr-font-color2:var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));--xr-font-color3:var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));--xr-border-color:var(--jp-border-color2, #e0e0e0);--xr-disabled-color:var(--jp-layout-color3, #bdbdbd);--xr-background-color:var(--jp-layout-color0, white);--xr-background-color-row-even:var(--jp-layout-color1, white);--xr-background-color-row-odd:var(--jp-layout-color2, #eeeeee)}body.vscode-dark,html[theme=dark]{--xr-font-color0:rgba(255, 255, 255, 1);--xr-font-color2:rgba(255, 255, 255, 0.54);--xr-font-color3:rgba(255, 255, 255, 0.38);--xr-border-color:#1F1F1F;--xr-disabled-color:#515151;--xr-background-color:#111111;--xr-background-color-row-even:#111111;--xr-background-color-row-odd:#313131}.xr-wrap{display:block;min-width:300px;max-width:700px}.xr-text-repr-fallback{display:none}.xr-header{padding-top:6px;padding-bottom:6px;margin-bottom:4px;border-bottom:solid 1px var(--xr-border-color)}.xr-header>div,.xr-header>ul{display:inline;margin-top:0;margin-bottom:0}.xr-array-name,.xr-obj-type{margin-left:2px;margin-right:10px}.xr-obj-type{color:var(--xr-font-color2)}.xr-sections{padding-left:0!important;display:grid;grid-template-columns:150px auto auto 1fr 20px 20px}.xr-section-item{display:contents}.xr-section-item input{display:none}.xr-section-item input+label{color:var(--xr-disabled-color)}.xr-section-item input:enabled+label{cursor:pointer;color:var(--xr-font-color2)}.xr-section-item input:enabled+label:hover{color:var(--xr-font-color0)}.xr-section-summary{grid-column:1;color:var(--xr-font-color2);font-weight:500}.xr-section-summary>span{display:inline-block;padding-left:.5em}.xr-section-summary-in:disabled+label{color:var(--xr-font-color2)}.xr-section-summary-in+label:before{display:inline-block;content:'►';font-size:11px;width:15px;text-align:center}.xr-section-summary-in:disabled+label:before{color:var(--xr-disabled-color)}.xr-section-summary-in:checked+label:before{content:'▼'}.xr-section-summary-in:checked+label>span{display:none}.xr-section-inline-details,.xr-section-summary{padding-top:4px;padding-bottom:4px}.xr-section-inline-details{grid-column:2/-1}.xr-section-details{display:none;grid-column:1/-1;margin-bottom:5px}.xr-section-summary-in:checked~.xr-section-details{display:contents}.xr-array-wrap{grid-column:1/-1;display:grid;grid-template-columns:20px auto}.xr-array-wrap>label{grid-column:1;vertical-align:top}.xr-preview{color:var(--xr-font-color3)}.xr-array-data,.xr-array-preview{padding:0 5px!important;grid-column:2}.xr-array-data,.xr-array-in:checked~.xr-array-preview{display:none}.xr-array-in:checked~.xr-array-data,.xr-array-preview{display:inline-block}.xr-dim-list{display:inline-block!important;list-style:none;padding:0!important;margin:0}.xr-dim-list li{display:inline-block;padding:0;margin:0}.xr-dim-list:before{content:'('}.xr-dim-list:after{content:')'}.xr-dim-list li:not(:last-child):after{content:',';padding-right:5px}.xr-has-index{font-weight:700}.xr-var-item,.xr-var-list{display:contents}.xr-var-item label,.xr-var-item>.xr-var-name span,.xr-var-item>div{background-color:var(--xr-background-color-row-even);margin-bottom:0}.xr-var-item>.xr-var-name:hover span{padding-right:5px}.xr-var-list>li:nth-child(odd)>.xr-var-name span,.xr-var-list>li:nth-child(odd)>div,.xr-var-list>li:nth-child(odd)>label{background-color:var(--xr-background-color-row-odd)}.xr-var-name{grid-column:1}.xr-var-dims{grid-column:2}.xr-var-dtype{grid-column:3;text-align:right;color:var(--xr-font-color2)}.xr-var-preview{grid-column:4}.xr-attrs dt,.xr-preview,.xr-var-dims,.xr-var-dtype,.xr-var-name{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;padding-right:10px}.xr-attrs dt:hover,.xr-var-dims:hover,.xr-var-dtype:hover,.xr-var-name:hover{overflow:visible;width:auto;z-index:1}.xr-var-attrs,.xr-var-data{display:none;background-color:var(--xr-background-color)!important;padding-bottom:5px!important}.xr-var-attrs-in:checked~.xr-var-attrs,.xr-var-data-in:checked~.xr-var-data{display:block}.xr-var-data>table{float:right}.xr-attrs,.xr-var-data,.xr-var-name span{padding-left:25px!important}.xr-attrs,.xr-var-attrs,.xr-var-data{grid-column:1/-1}dl.xr-attrs{padding:0;margin:0;display:grid;grid-template-columns:125px auto}.xr-attrs dd,.xr-attrs dt{padding:0;margin:0;float:left;padding-right:10px;width:auto}.xr-attrs dt{font-weight:400;grid-column:1}.xr-attrs dt:hover span{display:inline-block;background:var(--xr-background-color);padding-right:10px}.xr-attrs dd{grid-column:2;white-space:pre-wrap;word-break:break-all}.xr-icon-database,.xr-icon-file-text2{display:inline-block;vertical-align:middle;width:1em;height:1.5em!important;stroke-width:0;stroke:currentColor;fill:currentColor}</style><pre class="xr-text-repr-fallback">&lt;xarray.Dataset&gt;
Dimensions:               (degree: 2, lat: 89, lon: 180)
Coordinates:

* degree                (degree) int64 1 0
* lat                   (lat) float64 88.0 86.0 84.0 ... -84.0 -86.0 -88.0
* lon                   (lon) float64 0.0 2.0 4.0 6.0 ... 354.0 356.0 358.0
Data variables:
    time_matrix_rank      int64 2
    time_singular_values  (degree) float64 1.324 0.4976
    polyfit_coefficients  (degree, lat, lon) float64 1.829e-21 1.793e-21 ... nan
    polyfit_residuals     (lat, lon) float64 0.1355 0.1509 0.1622 ... nan nan</pre><div class="xr-wrap" hidden><div class="xr-header"><div class="xr-obj-type">xarray.Dataset</div></div><ul class="xr-sections"><li class="xr-section-item"><input id="section-5ae3758b-7e9e-4508-bdaf-9a7aaea5b953" class="xr-section-summary-in" type="checkbox" disabled><label for="section-5ae3758b-7e9e-4508-bdaf-9a7aaea5b953" class="xr-section-summary" title="Expand/collapse section">Dimensions:</label><div class="xr-section-inline-details"><ul class="xr-dim-list"><li><span class="xr-has-index">degree</span>: 2</li><li><span class="xr-has-index">lat</span>: 89</li><li><span class="xr-has-index">lon</span>: 180</li></ul></div><div class="xr-section-details"></div></li><li class="xr-section-item"><input id="section-86a19bf4-c8f7-45a1-a630-51ec527f65e4" class="xr-section-summary-in" type="checkbox" checked><label for="section-86a19bf4-c8f7-45a1-a630-51ec527f65e4" class="xr-section-summary">Coordinates: <span>(3)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">degree</span></div><div class="xr-var-dims">(degree)</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">1 0</div><input id="attrs-0964e83b-dd4a-4c90-95c3-f4e5c24aebd4" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-0964e83b-dd4a-4c90-95c3-f4e5c24aebd4" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-bb53b444-2af7-4c38-8a10-6776d751d9b4" class="xr-var-data-in" type="checkbox"><label for="data-bb53b444-2af7-4c38-8a10-6776d751d9b4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([1, 0])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lat</span></div><div class="xr-var-dims">(lat)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">88.0 86.0 84.0 ... -86.0 -88.0</div><input id="attrs-950dec5a-8e50-4863-9a94-9b7e65fea938" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-950dec5a-8e50-4863-9a94-9b7e65fea938" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-3e41baee-385b-4f78-bfe9-c03671309bb4" class="xr-var-data-in" type="checkbox"><label for="data-3e41baee-385b-4f78-bfe9-c03671309bb4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([ 88.,  86.,  84.,  82.,  80.,  78.,  76.,  74.,  72.,  70.,  68.,  66.,
        64.,  62.,  60.,  58.,  56.,  54.,  52.,  50.,  48.,  46.,  44.,  42.,
        40.,  38.,  36.,  34.,  32.,  30.,  28.,  26.,  24.,  22.,  20.,  18.,
        16.,  14.,  12.,  10.,   8.,   6.,   4.,   2.,   0.,  -2.,  -4.,  -6.,
        -8., -10., -12., -14., -16., -18., -20., -22., -24., -26., -28., -30.,
       -32., -34., -36., -38., -40., -42., -44., -46., -48., -50., -52., -54.,
       -56., -58., -60., -62., -64., -66., -68., -70., -72., -74., -76., -78.,
       -80., -82., -84., -86., -88.])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span class="xr-has-index">lon</span></div><div class="xr-var-dims">(lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.0 2.0 4.0 ... 354.0 356.0 358.0</div><input id="attrs-e05eb149-00c5-4936-84ef-6c3b9e33747c" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-e05eb149-00c5-4936-84ef-6c3b9e33747c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-c727e565-f39d-4589-8df6-4a12f4d794e4" class="xr-var-data-in" type="checkbox"><label for="data-c727e565-f39d-4589-8df6-4a12f4d794e4" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([  0.,   2.,   4.,   6.,   8.,  10.,  12.,  14.,  16.,  18.,  20.,  22.,
        24.,  26.,  28.,  30.,  32.,  34.,  36.,  38.,  40.,  42.,  44.,  46.,
        48.,  50.,  52.,  54.,  56.,  58.,  60.,  62.,  64.,  66.,  68.,  70.,
        72.,  74.,  76.,  78.,  80.,  82.,  84.,  86.,  88.,  90.,  92.,  94.,
        96.,  98., 100., 102., 104., 106., 108., 110., 112., 114., 116., 118.,
       120., 122., 124., 126., 128., 130., 132., 134., 136., 138., 140., 142.,
       144., 146., 148., 150., 152., 154., 156., 158., 160., 162., 164., 166.,
       168., 170., 172., 174., 176., 178., 180., 182., 184., 186., 188., 190.,
       192., 194., 196., 198., 200., 202., 204., 206., 208., 210., 212., 214.,
       216., 218., 220., 222., 224., 226., 228., 230., 232., 234., 236., 238.,
       240., 242., 244., 246., 248., 250., 252., 254., 256., 258., 260., 262.,
       264., 266., 268., 270., 272., 274., 276., 278., 280., 282., 284., 286.,
       288., 290., 292., 294., 296., 298., 300., 302., 304., 306., 308., 310.,
       312., 314., 316., 318., 320., 322., 324., 326., 328., 330., 332., 334.,
       336., 338., 340., 342., 344., 346., 348., 350., 352., 354., 356., 358.])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-a74f59ee-3230-4bfb-8900-c71590bf1661" class="xr-section-summary-in" type="checkbox" checked><label for="section-a74f59ee-3230-4bfb-8900-c71590bf1661" class="xr-section-summary">Data variables: <span>(4)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><ul class="xr-var-list"><li class="xr-var-item"><div class="xr-var-name"><span>time_matrix_rank</span></div><div class="xr-var-dims">()</div><div class="xr-var-dtype">int64</div><div class="xr-var-preview xr-preview">2</div><input id="attrs-2a5ad65d-f041-49f0-92c7-ab20eb0a0299" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-2a5ad65d-f041-49f0-92c7-ab20eb0a0299" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-30e19518-9e7f-4a61-93fc-e0512122bb42" class="xr-var-data-in" type="checkbox"><label for="data-30e19518-9e7f-4a61-93fc-e0512122bb42" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array(2)</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>time_singular_values</span></div><div class="xr-var-dims">(degree)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.324 0.4976</div><input id="attrs-c1f39481-4dfc-42e9-a88e-e1abfcfccf1c" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-c1f39481-4dfc-42e9-a88e-e1abfcfccf1c" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-125f2b2e-5b0b-4590-9ab4-c9516ea55d28" class="xr-var-data-in" type="checkbox"><label for="data-125f2b2e-5b0b-4590-9ab4-c9516ea55d28" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([1.32379332, 0.49756533])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>polyfit_coefficients</span></div><div class="xr-var-dims">(degree, lat, lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">1.829e-21 1.793e-21 ... nan nan</div><input id="attrs-cca94625-f829-4fef-a538-90e4d985cad3" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-cca94625-f829-4fef-a538-90e4d985cad3" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-eb3fc711-4e05-427b-8f48-771ebcdce3a1" class="xr-var-data-in" type="checkbox"><label for="data-eb3fc711-4e05-427b-8f48-771ebcdce3a1" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[[ 1.82923496e-21,  1.79275329e-21,  1.76856392e-21, ...,
          1.28851544e-21,  1.61925145e-21,  1.84891767e-21],
        [ 1.69856974e-21,  1.93310164e-21,  2.09029894e-21, ...,
          4.23615915e-22,  1.03900542e-21,  1.38895576e-21],
        [ 4.88580456e-23,  5.38001802e-22,  8.39952478e-22, ...,
          4.17037002e-22,  2.72897282e-22,  1.19881189e-22],
        ...,
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan]],<br>
       [[-1.12220707e-03, -1.09981098e-03, -1.08496052e-03, ...,
         -7.90212282e-04, -9.93268669e-04, -1.13427585e-03],
        [-1.04197148e-03, -1.18596916e-03, -1.28247761e-03, ...,
         -2.59147680e-04, -6.37006099e-04, -8.51868770e-04],
        [-2.90550034e-05, -3.29381059e-04, -5.14774046e-04, ...,
         -2.55108814e-04, -1.66610147e-04, -7.26682318e-05],
        ...,
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan],
        [            nan,             nan,             nan, ...,
                     nan,             nan,             nan]]])</pre></div></li><li class="xr-var-item"><div class="xr-var-name"><span>polyfit_residuals</span></div><div class="xr-var-dims">(lat, lon)</div><div class="xr-var-dtype">float64</div><div class="xr-var-preview xr-preview">0.1355 0.1509 0.1622 ... nan nan</div><input id="attrs-dcbeb536-fdbe-4d74-8bb5-7168cde3747b" class="xr-var-attrs-in" type="checkbox" disabled><label for="attrs-dcbeb536-fdbe-4d74-8bb5-7168cde3747b" title="Show/Hide attributes"><svg class="icon xr-icon-file-text2"><use xlink:href="#icon-file-text2"/></svg></label><input id="data-39205c6a-dc76-44e1-8432-418767609785" class="xr-var-data-in" type="checkbox"><label for="data-39205c6a-dc76-44e1-8432-418767609785" title="Show/Hide data repr"><svg class="icon xr-icon-database"><use xlink:href="#icon-database"/></svg></label><div class="xr-var-attrs"><dl class="xr-attrs"></dl></div><div class="xr-var-data"><pre>array([[1.35541094e-01, 1.50859407e-01, 1.62157499e-01, ...,
        5.65878717e-02, 9.27819961e-02, 1.23492673e-01],
       [1.42509724e-01, 1.97205037e-01, 2.46591909e-01, ...,
        1.01276077e-02, 5.59799398e-02, 9.40325541e-02],
       [1.25243471e-04, 1.63354011e-02, 3.98172748e-02, ...,
        9.14922545e-03, 3.90729530e-03, 7.54019958e-04],
       ...,
       [           nan,            nan,            nan, ...,
                   nan,            nan,            nan],
       [           nan,            nan,            nan, ...,
                   nan,            nan,            nan],
       [           nan,            nan,            nan, ...,
                   nan,            nan,            nan]])</pre></div></li></ul></div></li><li class="xr-section-item"><input id="section-79d15854-379e-466c-a837-7ef50a5154dc" class="xr-section-summary-in" type="checkbox" disabled><label for="section-79d15854-379e-466c-a837-7ef50a5154dc" class="xr-section-summary" title="Expand/collapse section">Attributes: <span>(0)</span></label><div class="xr-section-inline-details"></div><div class="xr-section-details"><dl class="xr-attrs"></dl></div></li></ul></div></div><p>线性趋势（斜率）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds_poly.polyfit_coefficients.isel(degree=<span class="number">0</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb22f27f940&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_179_1.png" alt="png"></p><p>截距空间分布</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ds_poly.polyfit_coefficients.isel(degree=<span class="number">1</span>).plot()</span><br></pre></td></tr></table></figure><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;matplotlib.collections.QuadMesh at 0x7fb22f20a2e0&gt;</span><br></pre></td></tr></table></figure><p><img src="/2022/xarray/ch2-calculate/ch2-calculate_181_1.png" alt="png"></p></div><footer class="post-footer"><div class="reward-container"><div>您的支持是我创作的最大动力！</div><button>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.png" alt="BUUJUN WANG 微信"> <span>微信</span></div><div><img src="/images/alipay.png" alt="BUUJUN WANG 支付宝"> <span>支付宝</span></div></div></div><div class="post-copyright"><ul><li class="post-copyright-author"><strong>本文作者： </strong>BUUJUN WANG</li><li class="post-copyright-link"><strong>本文链接：</strong> <a href="http://buujun.github.io/2022/xarray/ch2-calculate/" title="Xarray - 计算">http://buujun.github.io/2022/xarray/ch2-calculate/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="post-tags"><a href="/tags/python/" rel="tag"># python</a> <a href="/tags/numpy/" rel="tag"># numpy</a> <a href="/tags/pandas/" rel="tag"># pandas</a> <a href="/tags/matplotlib/" rel="tag"># matplotlib</a> <a href="/tags/xarray/" rel="tag"># xarray</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2022/xarray/ch1-basics/" rel="prev" title="Xarray - 数据创建与读写"><i class="fa fa-chevron-left"></i> Xarray - 数据创建与读写</a></div><div class="post-nav-item"></div></div></footer></article></div><div class="comments" id="waline"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">BUUJUN WANG</span></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/next-boot.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.0/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script src="/js/third-party/fancybox.js"></script><script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script><script class="next-config" data-name="quicklink" type="application/json">{"enable":true,"home":true,"archive":true,"delay":true,"timeout":3000,"priority":true,"url":"http://buujun.github.io/2022/xarray/ch2-calculate/"}</script><script src="/js/third-party/quicklink.js"></script><script class="next-config" data-name="waline" type="application/json">{"lang":"zh-CN","enable":true,"serverURL":"https://waline-server-buujun.vercel.app","cssUrl":"https://unpkg.com/@waline/client@v2/dist/waline.css","commentCount":false,"pageview":false,"locale":{"placeholder":"Welcome to comment"},"emoji":["https://unpkg.com/@waline/emojis@1.0.1/weibo","https://unpkg.com/@waline/emojis@1.0.1/alus","https://unpkg.com/@waline/emojis@1.0.1/tw-emoji"],"meta":["nick","mail"],"requiredMeta":[],"wordLimit":300,"pageSize":10,"libUrl":"https://cdn.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","el":"#waline","comment":true,"path":"/2022/xarray/ch2-calculate/"}</script><link rel="stylesheet" href="https://unpkg.com/@waline/client@v2/dist/waline.css"><script>document.addEventListener("page:loaded",()=>{NexT.utils.loadComments(CONFIG.waline.el).then(()=>NexT.utils.getScript(CONFIG.waline.libUrl,{condition:window.Waline})).then(()=>Waline.init(Object.assign({},CONFIG.waline,{el:document.querySelector(CONFIG.waline.el)})))})</script><script async src="/js/cursor/fireworks.js"></script><script src="/js/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,document.body.addEventListener("input",POWERMODE)</script></body></html>